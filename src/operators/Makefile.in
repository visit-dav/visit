#                            Copyright 2000 - 2001
#                 The Regents of the University of California.
#                             All rights reserved.
# 
# This work  was produced at the  University of California, Lawrence Livermore
# National Laboratory  (UC LLNL)  under contract no.   W-7405-ENG-48 (Contract
# 48) between  the U.S.  Department  of Energy (DOE)  and  The Regents  of the
# University  of   California (University)   for   the operation  of UC  LLNL.
# Copyright  is reserved  to     the University for   purposes  of  controlled
# dissemination,   commercialization   through   formal licensing,   or  other
# disposition  under  terms  of Contract   48; DOE  policies, regulations  and
# orders;  and U.S.   statutes.  The  rights of   the  Federal Government  are
# reserved under  Contract 48 subject to the  restrictions agreed  upon by DOE
# and University.
# 
#                                 DISCLAIMER
# 
# This software was prepared as an  account of work sponsored  by an agency of
# the United  States Government. Neither the United  States Government nor the
# University of California  nor any  of their  employees, makes any  warranty,
# express or  implied,  or assumes  any  liability  or responsiblity for   the
# accuracy, completeness,  or   usefullness of   any  information,  apparatus,
# product, or process disclosed, or represents that its use would not infringe
# privately   owned  rights. Reference    herein to   any specific  commercial
# products, process, or service   by trade name, trademark,   manufacturer, or
# otherwise,  does not    necessarily  constitute or    imply its endorsement,
# recommendation,  or  favoring by    the  United  States Government  or   the
# University of California. The views and opinions of authors expressed herein
# do not necessarily state or reflect those of the United States Government or
# the University of  California,  and shall not  be  used for  advertising  or
# product endorsement purposes.
#
# Modifications:
#
#    Hank Childs, Wed Sep 12 11:20:05 PDT 2001
#    Added support for buildall configure option.
#
#    Jeremy Meredith, Mon Sep 24 17:38:55 PDT 2001
#    Added Transform and removed Shift.
#
#    Hank Childs, Tue Oct 23 14:36:55 PDT 2001
#    Added ColorIso.
#
#    Hank Childs, Tue Oct 23 15:25:40 PDT 2001
#    Added Threshold.
#
#    Hank Childs, Mon Nov  5 16:45:42 PST 2001
#    Added Displace.
#
#    Hank Childs, Mon Nov 12 16:52:58 PST 2001
#    Added Box.
#
#    Hank Childs, Fri Dec 21 14:16:17 PST 2001
#    Added Context.
#
#    Jeremy Meredith, Tue Jan  8 16:35:50 PST 2002
#    Made SiloDump a non-default operator.
#
#    Sean Ahern, Wed Mar  6 13:36:04 PST 2002
#    Added Math.  Changed how BUILDALL works.
#
#    Hank Childs, Thu Mar  7 10:19:36 PST 2002
#    Added Reflect.
#
#    Sean Ahern, Wed Mar 20 12:45:33 PST 2002
#    Removed Math for now since I'm making it a PublicFilter.
#
#    Eric Brugger, Thu Mar 21 15:31:02 PST 2002
#    Added the sphere slice operator.
#
#    Hank Childs, Wed Mar 27 10:12:15 PST 2002     
#    Added Isosurface.
#
#    Kathleen Bonnell, Thu Apr 25 15:46:34 PDT 2002   
#    Added Lineout.
#
#    Hank Childs, Wed May 29 15:33:12 PDT 2002 
#    Added Cone.
#
#    Hank Childs, Wed Jun  5 08:15:20 PDT 2002
#    Added IndexSelect and removed ColorIso.
#
#    Sean Ahern, Mon Jun 10 16:38:43 PDT 2002
#    Gutted while moving things to a central location.
#
#    Jeremy Meredith, Fri Jul 19 11:19:21 PDT 2002
#    Made it work with auto-generated makefiles.
#
#    Jeremy Meredith, Mon Jul 22 12:11:28 PDT 2002
#    Made it assume the directory makefiles were already built before "all".
#
#    Jeremy Meredith, Sat Aug  3 11:42:09 PDT 2002
#    Changed the way makefiles are built for subdirectories.
#
#    Hank Childs, Sun Aug 11 08:51:22 PDT 2002
#    Add Decimate operator.
#
#    Akira Haddox, Tue Aug 20 15:52:00 PDT 2002
#    Added Metric Threshold operator.    
#
#    Jeremy Meredith, Tue Aug 27 14:39:07 PDT 2002
#    Changed some small things about makefile generation.
#
#    Hank Childs, Mon Sep  2 11:48:40 PDT 2002
#    Added TotalVolume and TotalSurfaceArea.
#
#    Hank Childs, Mon Sep  9 09:57:02 PDT 2002
#    Added TotalRevolvedVolume.
#
#    Kathleen Bonnell, Wed Sep 25 10:47:46 PDT 2002
#    Removed TotalVolume, TotalSurfaceArea, TotalRevolvedVolume.  They now
#    are Queries. 
#
#    Hank Childs, Tue Oct 29 10:07:14 PST 2002
#    Added ConnCompReduce.
#
#    Jeremy Meredith, Sun Nov 17 09:55:23 PST 2002
#    Renamed Aslice to Slice.
#
#    Sean Ahern, Mon Nov 18 16:42:29 PST 2002
#    Renamed the "OPTIONALDIRS" so that we can build optional
#    operators/plots/dbs separately.
#
#    Hank Childs, Tue Nov 19 15:34:13 PST 2002
#    Made the Box operator no longer optional.
#
#    Hank Childs, Wed Dec 11 11:21:25 PST 2002
#    Added the Revolve operator.
#
#    Eric Brugger, Thu Jan 16 08:18:06 PST 2003
#    Renamed the Erase operator to Clip.
#
#    Akira Haddox, Thu Jun 12 15:50:34 PDT 2003
#    Added the ThreeSlice operator.
#
#    Hank Childs, Tue Jul  1 21:02:24 PDT 2003
#    Added SurfCompPrep.
#
#    Akira Haddox, Mon Jul 21 09:58:22 PDT 2003
#    Added RemoveCells.
#
#    Hank Childs, Mon Oct 20 16:29:56 PDT 2003
#    Added Cylinder.
#
#    Hank Childs, Thu Jan  8 16:49:18 PST 2004
#    Made inverse ghost zone be required.
#
#    Jeremy Meredith, Fri Jan 30 17:43:11 PST 2004
#    Added Isovolume.
#
#    Hank Childs, Thu May  6 09:59:30 PDT 2004
#    Make the displace operator be required.
#
#    Jeremy Meredith, Fri Sep  3 09:47:23 PDT 2004
#    Added project operator.
#
#    Hank Childs, Tue Nov  2 09:52:49 PST 2004
#    Added SubdivideQuads operator.
#
##############################################################################

@SET_MAKE@
@VARIABLES@
all: message
	for dir in $(SUBDIRS); do (cd $$dir && $(MAKE) $@) || exit 1; done

OPTIONAL=Context ConnCompReduce Decimate ExternalSurface \
         MetricThreshold RemoveCells Revolve SiloDump SubdivideQuads \
         SurfCompPrep Tube

REQUIRED=Box Clip Cone Cylinder Displace IndexSelect InverseGhostZone \
         Isosurface Isovolume Lineout OnionPeel Project Reflect Slice \
         SphereSlice ThreeSlice Threshold Transform

SUBDIRS=$(REQUIRED) @OPERATOR_OPTIONAL_DIRS@
ALLSUBDIRS=$(REQUIRED) $(OPTIONAL)

message:
	@echo
	@echo "****************************************************************************"
	@echo "****************************************************************************"
	@echo "***"
	@echo "*** Building Operators"
	@echo "***"
	@echo "****************************************************************************"
	@echo "****************************************************************************"


dirmakefiles:
	for dir in $(ALLSUBDIRS); do (cd $$dir && $(tmpbin)/visit -xml2makefile -noprint -clobber $${dir}.xml) || exit 1; done

clean:
	-$(RM) $(LIB)
	for dir in $(SUBDIRS); do (cd $$dir && test ! -f Makefile || $(MAKE) $@) || exit 1; done
	-$(RM) $(CLEAN_FILES)

distclean: clean
	if test -n "$(SUBDIRS)"; then \
		rev=""; for dir in $(SUBDIRS); do rev="$$dir $$rev"; done; \
		for dir in $$rev; do (cd $$dir && test ! -f Makefile || $(MAKE) $@); done \
	fi
	-$(RM) $(DISTCLEAN_FILES) *~ .depend core
	-$(RM) Makefile

depend: dirmakefiles
	for dir in $(SUBDIRS); do (cd $$dir && $(MAKE) $@) || exit 1; done

checkdep: dirmakefiles
	for dir in $(SUBDIRS); do (cd $$dir && $(MAKE) $@) || exit 1; done

