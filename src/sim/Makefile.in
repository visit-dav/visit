@SET_MAKE@
@VARIABLES@
@MPI_CC@
@MPI_CXX@



SIMSER=sim
SIMPAR=psim
SIMSRC=sim.c VisItControlInterface_V1.c simconnection.c UI_Connection.c SimHelperFunc.c
SIMSEROBJ=$(SIMSRC:.c=.o)
SIMPAROBJ=$(SIMSRC:.c=_par.o)

CPPFLAGS=@CPPFLAGS@ -I. -I../include -I../include/visit

SERLIBS=
PARLIBS=@MPI_LIBS@

#CFLAGS=-g -I. -I../include/visit -Wimplicit-function-declaration
#LDFLAGS=-L../lib -L/usr/X11R6/lib
#PARLIBS=-lmpich

#LIBS=-ldl -lsocket -lnsl
#LIBS=-ldl -lpthread

# override for suns:
#PARLIBS=-L/usr/gapps/mpich/1.2.4/SunOS/serial/default/optim/lib -lmpich -lrt -lthread
#CFLAGS=-g -I. -I../include/visit -Wimplicit-function-declaration -I/usr/gapps/mpich/1.2.4/SunOS/serial/default/optim/include

all: $(SIMSER) $(SIMPAR)


$(SIMSER): $(SIMSEROBJ)
	$(CC) -Wl,--export-dynamic $(LDFLAGS) $(SIMSEROBJ) $(LIBS) $(SERLIBS) -o $@

$(SIMPAR): $(SIMPAROBJ)
	$(CC) -Wl,--export-dynamic $(LDFLAGS) $(SIMPAROBJ) $(LIBS) $(PARLIBS) -o $@

$(SIMSER).pure: $(SIMSEROBJ)
	purify $(LD) $(LDFLAGS) $(SIMSEROBJ) $(LIBS) -o $@


clean:
	rm -f $(SIMSEROBJ) $(SIMSER) $(SIMSER).pure
	rm -f $(SIMPAROBJ) $(SIMPAR)

@TARGETS@
@PARLIBTARGETS@
