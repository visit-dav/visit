

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12.3. Database comparison &mdash; VisIt User Manual 2.11 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="VisIt User Manual 2.11 documentation" href="../../index.html"/>
        <link rel="up" title="12. Multiple Databases and Windows" href="index.html"/>
        <link rel="next" title="12.4. Multiple window operations" href="Multiple_Window_Operations.html"/>
        <link rel="prev" title="12.2. Database correlations" href="Database_correlations.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VisIt User Manual
          

          
          </a>

          
            
            
              <div class="version">
                local build
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">GUI Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Intro/index.html">1. Introduction to VisIt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../WorkingWithFiles/index.html">2. Working with Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Plots/index.html">3. Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Operators/index.html">4. Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SavingPrinting/index.html">5. Saving and Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VisualizationWindows/index.html">6. Visualization Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Subsetting/index.html">7. Subsetting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Quantitative/index.html">8. Quantitative Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MakingItPretty/index.html">9. Making it pretty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Animation/index.html">10. Animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../InteractiveTools/index.html">11. Interactive Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">12. Multiple Databases and Windows</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Databases.html">12.1. Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="Database_correlations.html">12.2. Database correlations</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">12.3. Database comparison</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-role-of-expressions">12.3.1. The role of expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plotting-the-difference-between-two-databases">12.3.2. Plotting the difference between two databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plotting-values-relative-to-the-first-time-state">12.3.3. Plotting values relative to the first time state</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plotting-time-derivatives">12.3.4. Plotting time derivatives</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Multiple_Window_Operations.html">12.4. Multiple window operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ClientServer/index.html">13. Client Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ComputeEngines/index.html">14. Compute Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Preferences/index.html">15. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Help/index.html">16. Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../StartupOptions/index.html">17. Startup Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Building/index.html">18. Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BuildingOnWindows/index.html">19. Building on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Acknowledgments/index.html">20. Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">21. Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/index.html">22. Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cli_manual/index.html">CLI Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_manual/index.html">Developer Manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VisIt User Manual</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">VisIt GUI User Manual</a> &raquo;</li>
        
          <li><a href="index.html">12. Multiple Databases and Windows</a> &raquo;</li>
        
      <li>12.3. Database comparison</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/gui_manual/MultipleDatabaseAndWindows/Database_comparison.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="database-comparison">
<span id="id1"></span><h1>12.3. Database comparison<a class="headerlink" href="#database-comparison" title="Permalink to this headline">¶</a></h1>
<p>Comparing the results of multiple related simulation databases is one of
<a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s main uses. You can put plots from multiple databases in the same
window or you can put plots from each database in adjacent visualization
windows, allowing you to compare plots visually. In addition to these
visual comparison modes, <a class="reference external" href="https://visit.llnl.gov">VisIt</a> supports more direct comparison of databases
using database comparisons. Database comparison allows you to plot direct
differences between two databases or between different time states in the
same database (i.e. time derivatives). <a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s expression language is used
extensively to facilitate the database comparison.</p>
<div class="section" id="the-role-of-expressions">
<h2>12.3.1. The role of expressions<a class="headerlink" href="#the-role-of-expressions" title="Permalink to this headline">¶</a></h2>
<p>Database comparison is accomplished by creating new expressions that
involve the contents of multiple databases using <a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s expression
language. Database comparisons use special expressions called
<a class="reference internal" href="../Quantitative/Expressions.html#comparison-expressions"><span class="std std-ref">Cross-Mesh Field Evaluation (CMFE)</span></a>
expressions, <a class="reference internal" href="../Quantitative/Expressions.html#pos-cmfe-expression-function"><span class="std std-ref">pos_cmfe()</span></a> and
<a class="reference internal" href="../Quantitative/Expressions.html#conn-cmfe-expression-function"><span class="std std-ref">conn_cmfe()</span></a>,
which are capable of mapping a field from one mesh to another mesh
The name “conn_cmfe” means
<em>connectivity-based cross mesh field evaluation</em> (CMFE) and as the name
implies, the expression takes fields from one mesh and maps the field onto
another mesh by taking the cell or node-centered values on the donor mesh
and mapping them onto the cells or nodes having the same indices in the
new mesh. For valid results, conn_cmfe requires the donor and target meshes
be topologically congruent (e.g. size, connectivity, decomposition, etc.).
If this is not the case, then one should use the position-based, pos_cmfe
expression. The CMFE expressions can be used to map fields from a mesh in
one database onto a mesh in the active database, which then allows you to
create difference expressions involving the active database.</p>
<p>There is also a position-based CMFE (<em>pos_cmfe</em>), which will resample the field
from one mesh onto another mesh by calculating the values of the field on
the first mesh using the locations of the cells or nodes in a second mesh.
More information on CMFE expressions are found in the
<a class="reference internal" href="../Quantitative/Expressions.html#comparison-expressions"><span class="std std-ref">Cross-Mesh Field Evaluation (CMFE)</span></a> section
of the <a class="reference internal" href="../Quantitative/Expressions.html#expressions"><span class="std std-ref">Exprssions</span></a> chapter.</p>
<p>Note that there is also a helpful <em>wizard</em>, the
<a class="reference internal" href="../Quantitative/DataLevelComparisonsWizard.html#datalevelcomparisonswizard"><span class="std std-ref">Data Level Comparison Wizard</span></a>, that
simplifies the process of defining comparison expressions. Here, we
describe the <a class="reference internal" href="../Quantitative/Expressions.html#comparison-expressions"><span class="std std-ref">CMFE</span></a> expressions and
demonstrate how to use them in comparisons.</p>
</div>
<div class="section" id="plotting-the-difference-between-two-databases">
<h2>12.3.2. Plotting the difference between two databases<a class="headerlink" href="#plotting-the-difference-between-two-databases" title="Permalink to this headline">¶</a></h2>
<p>Simulations are often run as parts of parameter studies, meaning the
initial conditions are changed slightly to see what observable effects
the changes produce. The ability to do direct numerical comparison of
multiple simulation databases is required in order to observe the often
miniscule differences between the fields in the two databases. <a class="reference external" href="https://visit.llnl.gov">VisIt</a>
provides the conn_cmfe expression, which allows you to map a field from
one simulation database onto a mesh from another simulation database.
Once the mapping has been done, you can then perform difference operations
using an expression like this:</p>
<p>&lt;mesh/ireg&gt; - conn_cmfe(&lt;/usr/local/visit/data/dbB00.pdb:mesh/ireg&gt;, mesh)</p>
<p>The expression above is a simple difference operation of database A minus
database B. The assumption made by this expression is that database A is
the active database and we’re trying to map database B onto it so we can
subtract it from database A’s <em>mesh/ireg</em> variable. Note that the conn_cmfe
expression takes two arguments. The first argument encodes the name of
the file and the field that we’re mapping onto a mesh from the active
database, where the mesh name is given by the second argument. In this
example, we’re mapping database B’s <em>mesh/ireg</em> field onto database A’s
mesh. <a class="reference internal" href="#a-minus-b"><span class="std std-numref">Figure 12.15</span></a> shows a picture that illustrates
the database differencing operation.</p>
<div class="figure" id="id2">
<span id="a-minus-b"></span><img alt="../../_images/a_minus_b.png" src="../../_images/a_minus_b.png" />
<p class="caption"><span class="caption-number">Fig. 12.15 </span><span class="caption-text">Database B subtracted from database A</span></p>
</div>
</div>
<div class="section" id="plotting-values-relative-to-the-first-time-state">
<h2>12.3.3. Plotting values relative to the first time state<a class="headerlink" href="#plotting-values-relative-to-the-first-time-state" title="Permalink to this headline">¶</a></h2>
<p>Plotting a variable relative to its initial values can be important for
understanding how the variable has changed over time. The conn_cmfe
expression is also used to plot values from one time state relative to
the values at the current time state. Consider the following expression:</p>
<p>&lt;mesh/ireg&gt; - conn_cmfe(&lt;/usr/local/visit/data/dbA00.pdb[0]i:mesh/ireg&gt;, mesh)</p>
<p>The above expression subtracts the value of <em>mesh/ireg</em> at time state zero
from the value of <em>mesh/ireg</em> at the current time state. The interesting
feature about the above expression is its use of the expression language’s
<em>[]</em> operator for specifying a database time state. The expression uses
<em>“[0]i”</em> , which means use time state zero because the <em>“i”</em> suffix
indicates that the number inside of the square brackets is to be used as
an absolute time state index. As you change the time slider, the values
for the current time state will change but the part of the expression
using conn_cmfe, which in this case uses the first database time state,
will not change. This allows you to create expressions that compare the
current time state to a fixed time state. You can, of course, substitute
different time state indices into the conn_cmfe expression so you don’t
have to always compare the current time state to time state zero.</p>
<div class="figure" id="id3">
<span id="a-minus-a0"></span><img alt="../../_images/a_minus_a0.png" src="../../_images/a_minus_a0.png" />
<p class="caption"><span class="caption-number">Fig. 12.16 </span><span class="caption-text">Time state 6 minus time state 0</span></p>
</div>
</div>
<div class="section" id="plotting-time-derivatives">
<h2>12.3.4. Plotting time derivatives<a class="headerlink" href="#plotting-time-derivatives" title="Permalink to this headline">¶</a></h2>
<p>Plotting time derivatives is much like plotting the difference between the
current time state and a fixed time state except that instead of being
fixed, the second time state being compared is free to move relative to
the current time state. To plot a simple time derivative such as the
current time state minus the last time state, create an expression similar
to the following expression:</p>
<p>&lt;mesh/ireg&gt; - conn_cmfe(&lt;/usr/local/visit/data/dbA00.pdb[-1]id:mesh/ireg&gt;, mesh)</p>
<p>The important piece of the above expression is its use of <em>“[-1]id”</em> to
specify a time state delta of -1, which means add -1 to the current time
state to get the time state whose data will be used in the conn_cmfe
calculation. You could provide different values for the time state in the
<em>[]</em> operator. Substituting a value of <em>3</em>, for example, would make the
conn_cmfe expression consider the data for 3 time states beyond the current
time state. If you use a time state delta, which always uses the <em>“d”</em>
suffix, the time state being considered is always relative to the current
time state. This means that as you change time states for the active
database using the time slider, the plots that use the conn_cmfe expression
will update properly. <a class="reference internal" href="#a-minus-preva"><span class="std std-numref">Figure 12.17</span></a> shows an example
plot of a time derivative.</p>
<img alt="../../_images/a.png" src="../../_images/a.png" />
<div class="figure" id="id4">
<span id="a-minus-preva"></span><img alt="../../_images/a_minus_preva.png" src="../../_images/a_minus_preva.png" />
<p class="caption"><span class="caption-number">Fig. 12.17 </span><span class="caption-text">Plot of a variable and its time derivative plot</span></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Multiple_Window_Operations.html" class="btn btn-neutral float-right" title="12.4. Multiple window operations" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Database_correlations.html" class="btn btn-neutral" title="12.2. Database correlations" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, LLNL, UCRL-SM-220449.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>