

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>18.2. Advanced Usage &mdash; VisIt User Manual 2.11 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="VisIt User Manual 2.11 documentation" href="../../index.html"/>
        <link rel="up" title="18. Building" href="index.html"/>
        <link rel="next" title="18.3. Common Build Scenarios" href="Common_Build_Scenarios.html"/>
        <link rel="prev" title="18.1. Basic Usage" href="Basic_Usage.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VisIt User Manual
          

          
          </a>

          
            
            
              <div class="version">
                local build
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">GUI Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Intro/index.html">1. Introduction to VisIt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../WorkingWithFiles/index.html">2. Working with Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Plots/index.html">3. Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Operators/index.html">4. Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SavingPrinting/index.html">5. Saving and Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VisualizationWindows/index.html">6. Visualization Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Subsetting/index.html">7. Subsetting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Quantitative/index.html">8. Quantitative Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MakingItPretty/index.html">9. Making it pretty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Animation/index.html">10. Animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../InteractiveTools/index.html">11. Interactive Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MultipleDatabaseAndWindows/index.html">12. Multiple Databases and Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ClientServer/index.html">13. Client Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ComputeEngines/index.html">14. Compute Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Preferences/index.html">15. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Help/index.html">16. Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../StartupOptions/index.html">17. Startup Options</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">18. Building</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Basic_Usage.html">18.1. Basic Usage</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">18.2. Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-a-parallel-version">18.2.1. Building a parallel version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-with-mesa-as-the-opengl-implementation">18.2.2. Building with Mesa as the OpenGL implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-difference-between-mesagl-and-osmesa">18.2.3. The difference between <code class="docutils literal notranslate"><span class="pre">--mesagl</span></code> and <code class="docutils literal notranslate"><span class="pre">--osmesa</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-on-a-system-without-internet-access">18.2.4. Building on a system without internet access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#different-versions-of-build-visit">18.2.5. Different versions of <code class="docutils literal notranslate"><span class="pre">build_visit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-build-visit-failures">18.2.6. Troubleshooting <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> failures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Common_Build_Scenarios.html">18.3. Common Build Scenarios</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../BuildingOnWindows/index.html">19. Building on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Acknowledgments/index.html">20. Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">21. Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/index.html">22. Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cli_manual/index.html">CLI Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_manual/index.html">Developer Manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VisIt User Manual</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">VisIt GUI User Manual</a> &raquo;</li>
        
          <li><a href="index.html">18. Building</a> &raquo;</li>
        
      <li>18.2. Advanced Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/gui_manual/Building/Advanced_Usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-usage">
<span id="id1"></span><h1>18.2. Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">build_visit</span></code> comes with many options for features such as building a
parallel version, overcoming issues with OpenGL, a rendering library used
by <a class="reference external" href="https://visit.llnl.gov">VisIt</a> to render images, and controlling precisely what libraries
<a class="reference external" href="https://visit.llnl.gov">VisIt</a> is built with.</p>
<div class="section" id="building-a-parallel-version">
<h2>18.2.1. Building a parallel version<a class="headerlink" href="#building-a-parallel-version" title="Permalink to this headline">¶</a></h2>
<p>One of powerful capabilities of <a class="reference external" href="https://visit.llnl.gov">VisIt</a> is running in parallel on large
parallel clusters. <a class="reference external" href="https://visit.llnl.gov">VisIt</a> runs in parallel using a library called MPI, which
stands for Message Passing Interface. There are a couple of ways in which you
can build a parallel version of <a class="reference external" href="https://visit.llnl.gov">VisIt</a> using MPI. If your system doesn’t
already have MPI installed on it, which is typically the case with a desktop
system or small cluster, then you can use MPICH, which is an open source
implementation of MPI. The following example builds a parallel version using
MPICH.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">mpich</span>
</pre></div>
</div>
<p>If your system already has MPI installed on it, which is typically the case
with a large system at a computer center, you can set several environment
variables that specify the location of the MPI libraries and header files.
The following example uses a system installed MPI library.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">env</span> <span class="n">PAR_COMPILER</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">mvapich2</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpicc</span> \
     <span class="n">PAR_COMPILER_CXX</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">mvapich2</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mpicxx</span> \
     <span class="n">PAR_INCLUDE</span><span class="o">=-</span><span class="n">I</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">mvapich2</span><span class="o">/</span><span class="n">include</span> \
     <span class="n">PAR_LIBS</span><span class="o">=-</span><span class="n">lmpl</span> \
<span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">parallel</span>
</pre></div>
</div>
<p>When running in parallel, the user will typically use scalable rendering for
rendering images in parallel. VisIt does this through the use of the Mesa 3D
graphics library. Because of this you will want to include Mesa 3D when
building a parallel version. In the following example we have included
building with the Mesa 3D library.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">mpich</span> <span class="o">--</span><span class="n">osmesa</span>
</pre></div>
</div>
</div>
<div class="section" id="building-with-mesa-as-the-opengl-implementation">
<h2>18.2.2. Building with Mesa as the OpenGL implementation<a class="headerlink" href="#building-with-mesa-as-the-opengl-implementation" title="Permalink to this headline">¶</a></h2>
<p>Mesa 3D is also an implementation of OpenGL and it can be used in place of
the system OpenGL when building <a class="reference external" href="https://visit.llnl.gov">VisIt</a>. There are a couple of reasons you
would want to use Mesa 3D instead of the system OpenGL. The first is when you
don’t have a system OpenGL, which typically occurs when building in a container
or on a virtual machine. The second is when your system implementation of
OpenGL is too old to support VTK. In the following example we use Mesa 3D
instead of the system OpenGL.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">mesagl</span>
</pre></div>
</div>
</div>
<div class="section" id="the-difference-between-mesagl-and-osmesa">
<h2>18.2.3. The difference between <code class="docutils literal notranslate"><span class="pre">--mesagl</span></code> and <code class="docutils literal notranslate"><span class="pre">--osmesa</span></code><a class="headerlink" href="#the-difference-between-mesagl-and-osmesa" title="Permalink to this headline">¶</a></h2>
<p>When you specify <code class="docutils literal notranslate"><span class="pre">--mesagl</span></code> VTK will be built against Mesa 3D. When you
specify <code class="docutils literal notranslate"><span class="pre">--osmesa</span></code> VTK is built against the system OpenGL and the Mesa 3D
library is substituted at run time for OpenGL when running the parallel
engine to enable scalable rendering. If you specify <code class="docutils literal notranslate"><span class="pre">--mesagl</span></code> then
<code class="docutils literal notranslate"><span class="pre">--osmesa</span></code> is unnecessary and ignored if specified.</p>
</div>
<div class="section" id="building-on-a-system-without-internet-access">
<h2>18.2.4. Building on a system without internet access<a class="headerlink" href="#building-on-a-system-without-internet-access" title="Permalink to this headline">¶</a></h2>
<p>When you want to build visit on a system without internet access, you can
use <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> to download the third party libraries and source code
to a system that has internet access and then move those files to your
machine without access. The following example downloads the optional
libraries, mpich and osmesa.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">optional</span> <span class="o">--</span><span class="n">mpich</span> <span class="o">--</span><span class="n">osmesa</span> <span class="o">--</span><span class="n">download</span><span class="o">-</span><span class="n">only</span>
</pre></div>
</div>
<p>Unfortunately, due to the way the code that builds Python is implemented,
some Python libraries will not be downloaded. Here is the list of commands
to download those additional libraries.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">Imaging</span><span class="o">-</span><span class="mf">1.1</span><span class="o">.</span><span class="mf">7.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">setuptools</span><span class="o">-</span><span class="mf">28.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">Cython</span><span class="o">-</span><span class="mf">0.25</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">numpy</span><span class="o">-</span><span class="mf">1.14</span><span class="o">.</span><span class="mf">1.</span><span class="n">zip</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">pyparsing</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">requests</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">visit</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="mf">3.0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">seedme</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">client</span><span class="o">-</span><span class="n">v1</span><span class="o">.</span><span class="mf">2.4</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p>It’s possible that the list could change and the above list becomes outdated.
In this case you can run <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> to just build Python and that will
end up downloading all the files you need. The following command builds only
Python.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build_visit3_0_1</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">thirdparty</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">visit</span> <span class="o">--</span><span class="n">python</span>
</pre></div>
</div>
</div>
<div class="section" id="different-versions-of-build-visit">
<h2>18.2.5. Different versions of <code class="docutils literal notranslate"><span class="pre">build_visit</span></code><a class="headerlink" href="#different-versions-of-build-visit" title="Permalink to this headline">¶</a></h2>
<p>When you use a version of <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> that has a version number in it,
for example <code class="docutils literal notranslate"><span class="pre">build_visit3_0_1</span></code> then it builds that tagged version of
<a class="reference external" href="https://visit.llnl.gov">VisIt</a>. If the version of <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> was from the develop branch of
<a class="reference external" href="https://visit.llnl.gov">VisIt</a>, then it will grab the latest version of <a class="reference external" href="https://visit.llnl.gov">VisIt</a> from the devlop
branch. If the version of <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> came from a release candidate
branch, for example the v3.0 branch, then it will grab the latest version
of <a class="reference external" href="https://visit.llnl.gov">VisIt</a> from that branch.</p>
</div>
<div class="section" id="troubleshooting-build-visit-failures">
<h2>18.2.6. Troubleshooting <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> failures<a class="headerlink" href="#troubleshooting-build-visit-failures" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> runs, it generates a log file with <code class="docutils literal notranslate"><span class="pre">_log</span></code> added to
the name of the script. For example, if you are running <code class="docutils literal notranslate"><span class="pre">build_visit3_0_1</span></code>
then the log file will be named <code class="docutils literal notranslate"><span class="pre">build_visit3_0_1_log</span></code>. The error that
caused the failure should be near the end of the log file. When <code class="docutils literal notranslate"><span class="pre">build_visit</span></code>
finishes running, it will leave the directories that it used to build
the packages intact. You can go into the directory of the package that
failed and correct the issue and finish building and installing the package.
You can then execute the <code class="docutils literal notranslate"><span class="pre">build_visit</span></code> command again to have it continue
the build.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Common_Build_Scenarios.html" class="btn btn-neutral float-right" title="18.3. Common Build Scenarios" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Basic_Usage.html" class="btn btn-neutral" title="18.1. Basic Usage" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, LLNL, UCRL-SM-220449.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>