

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.4. Saving Cinema &mdash; VisIt User Manual 2.11 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="VisIt User Manual 2.11 documentation" href="../../index.html"/>
        <link rel="up" title="5. Saving and Printing" href="index.html"/>
        <link rel="next" title="5.5. Exporting databases" href="Exporting_databases.html"/>
        <link rel="prev" title="5.3. Saving movies" href="Saving_movies.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VisIt User Manual
          

          
          </a>

          
            
            
              <div class="version">
                local build
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">GUI Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Intro/index.html">1. Introduction to VisIt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../WorkingWithFiles/index.html">2. Working with Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Plots/index.html">3. Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Operators/index.html">4. Operators</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">5. Saving and Printing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Session_files.html">5.1. Session files</a></li>
<li class="toctree-l3"><a class="reference internal" href="Saving_the_visualization_window.html">5.2. Saving the Visualization Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="Saving_movies.html">5.3. Saving movies</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.4. Saving Cinema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#choosing-filename">5.4.1. Choosing filename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choosing-specification">5.4.2. Choosing specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#image-settings">5.4.3. Image settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#composite-images">5.4.4. Composite images</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choosing-camera-type">5.4.5. Choosing Camera type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#frame-settings">5.4.6. Frame settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#saving-cinema-from-libsim">5.4.7. Saving Cinema from Libsim</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Exporting_databases.html">5.5. Exporting databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="Printing.html">5.6. Printing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../VisualizationWindows/index.html">6. Visualization Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Subsetting/index.html">7. Subsetting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Quantitative/index.html">8. Quantitative Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MakingItPretty/index.html">9. Making it pretty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Animation/index.html">10. Animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../InteractiveTools/index.html">11. Interactive Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MultipleDatabaseAndWindows/index.html">12. Multiple Databases and Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ClientServer/index.html">13. Client Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ComputeEngines/index.html">14. Compute Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Preferences/index.html">15. Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Help/index.html">16. Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../StartupOptions/index.html">17. Startup Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Building/index.html">18. Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BuildingOnWindows/index.html">19. Building on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Acknowledgments/index.html">20. Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">21. Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contributing/index.html">22. Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cli_manual/index.html">CLI Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_manual/index.html">Developer Manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VisIt User Manual</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">VisIt GUI User Manual</a> &raquo;</li>
        
          <li><a href="index.html">5. Saving and Printing</a> &raquo;</li>
        
      <li>5.4. Saving Cinema</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/gui_manual/SavingPrinting/Saving_Cinema.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="saving-cinema">
<h1>5.4. Saving Cinema<a class="headerlink" href="#saving-cinema" title="Permalink to this headline">¶</a></h1>
<p>VisIt lets you save Cinema databases in addition to saving images and movies of
your plots. A Cinema database is an image-based proxy for large scale data that
lets you explore the data using far fewer computational resources. Where
post-processing full data might take a supercomputer, exploring a Cinema database
can be done on a tablet. Cinema databases consist of images that are indexed by
a JSON file or CSV file. The index file is used by the Cinema viewer (available at
<a class="reference external" href="http://www.cinemascience.org/">www.cinemascience.org</a>) to determine a set of
parameters that can be changed by
the user. These parameters are used to look up corresponding image files for
display in the Cinema viewer. For example, Cinema databases typically allow
the user to navigate through time using a time parameter. Cinema databases also
can be saved using a spherical camera that is described by phi and theta parameters
to let the user see the plots from various camera angles. It is possible to create
Cinema databases in situ using Libsim so Cinema databases can be created
incrementally as a simulation runs. This section introduces
the <strong>Save Cinema</strong> wizard and explains how to create Cinema databases from within
VisIt’s GUI.</p>
<div class="figure" id="id1">
<span id="save-cinema-wizard-1"></span><img alt="../../_images/savecinemawizard1.png" src="../../_images/savecinemawizard1.png" />
<p class="caption"><span class="caption-number">Fig. 5.12 </span><span class="caption-text">Save Cinema wizard (screen 1)</span></p>
</div>
<p>The <strong>Save Cinema</strong> wizard (see <a class="reference internal" href="#save-cinema-wizard-1"><span class="std std-numref">Figure 5.12</span></a>) is
available in the <strong>Main Window’s Files</strong> menu. The <strong>Save Cinema</strong> wizard’s
purpose is to let you set the options that are used to take the current
visualizations and produce a Cinema database. Progress through the screens using
the <strong>Next</strong> button until the last screen is reached. Clicking <strong>Cancel</strong> at any
time will close the wizard. Clicking the <strong>Finish</strong> button will tell VisIt to
produce a Cinema database with the current settings.</p>
<div class="section" id="choosing-filename">
<h2>5.4.1. Choosing filename<a class="headerlink" href="#choosing-filename" title="Permalink to this headline">¶</a></h2>
<p>Cinema databases are stored as a directory structure containing various nested
directories with image files and an index file. When saving a Cinema database,
you must pick the name of the top level directory under which all other files
will be saved. The <strong>Save Cinema</strong> wizard contains a <strong>File name</strong> selection
control that lets you select the name of the Cinema “.cdb” directory. The control
can accept file names that are typed in and clicking the <strong>…</strong> button opens a
filename selection window that permits a new filename to be selected.</p>
</div>
<div class="section" id="choosing-specification">
<h2>5.4.2. Choosing specification<a class="headerlink" href="#choosing-specification" title="Permalink to this headline">¶</a></h2>
<p>Cinema databases are described by specifications that dictate the format and
allowable contents for the files that they contain. There are currently 3 Cinema
specifications in use: A, C, D.</p>
<p>Specification A describes a Cinema database format
that contains image files (PNG, TIFF, etc.) that are associated with various
user-defined parameters such as time or camera angles in the case of a phi-theta
camera. This specification is compatible with any of the VisIt plots since images
of the currently set up visualizations are saved.
Specification C describes a Cinema database format that adheres to a different
directory structure over specification A and can contain composite images. Composite
images are comprised of 3 separate files: a PNG file containing a luminance image,
a ZLib-compressed file containing the Z-buffer, and a ZLib-compressed file
containing a rendering of actual scalar values for the plot.
Specification D is similar to specification A except that it uses a CSV file to
associate image files with a set of parameters, enabling sparse sets of images.</p>
<p>The <strong>Save Cinema</strong> wizard contains a set of A, C, D radio buttons to let you
choose the most appropriate specification for the type of Cinema database to
be created.</p>
</div>
<div class="section" id="image-settings">
<h2>5.4.3. Image settings<a class="headerlink" href="#image-settings" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Save Cinema</strong> wizard contains controls for image settings such as the
file format, image width/height, and whether to use screen capture. The
<strong>File format</strong> control lets you select the image file format to be used.
Several pixel-based image file formats are available such as BMP, PNG, TIFF,
and when available EXR. OpenEXR is a format from ILM that can store various
image channels and data in multiple layers that can be composited later. Support
for OpenEXR is optionally compiled into VisIt. The <strong>Width</strong> and <strong>Height</strong>
controls allow the output image width and height to be specified when screen
capture is not in use by setting the <strong>Use screen capture</strong> controls. This
permits VisIt to save images in a custom size as opposed to saving images
based on the current visualization window’s size. Note that using screen
capture is faster for normal images since it does not require VisIt to
re-render the visualizations.</p>
</div>
<div class="section" id="composite-images">
<h2>5.4.4. Composite images<a class="headerlink" href="#composite-images" title="Permalink to this headline">¶</a></h2>
<p>Specification C Cinema databases support saving composite images which consist
of a luminance image, a Z image, and a scalar image. The luminance image is
a gray scale image that indicates the lighting used in the scene and it is
saved as a PNG image or other pixel format image. The Z image is contains the
Z-buffer for the luminance image, stored as a buffer of 32-bit floating point
values that have been ZLib-compressed and written to a raw binary file. The scalar
image is stored the same as the Z buffer image but it contains float values
that correspond to the actual scalars that were rendered in the visualization.
The scalar values are used in the Cinema viewer to dynamically recolor the
scene at render time. Composite images are most appropriate for surface-based
VisIt plots that employ a continuous color table, such as the Pseudocolor plot.
Composite images can be enabled by turning on the
<strong>Create composite images</strong> check box in the <strong>Save Cinema</strong> wizard when
specification C is used. When this setting is in effect, each VisIt plot will
be saved to a separate “layer” in the Cinema database so it can be composited
into the scene at will. <a class="reference internal" href="#save-cinema-wizard-2"><span class="std std-numref">Figure 5.14</span></a> shows multiple
VisIt plots that have been saved as separate layers to a composite image
specification C Cinema database that enables layers to be turned on and
off at view time.</p>
<div class="figure" id="id2">
<span id="cinemaviewer"></span><img alt="../../_images/cinemaviewer.png" src="../../_images/cinemaviewer.png" />
<p class="caption"><span class="caption-number">Fig. 5.13 </span><span class="caption-text">Cinema viewer with composite layers</span></p>
</div>
</div>
<div class="section" id="choosing-camera-type">
<h2>5.4.5. Choosing Camera type<a class="headerlink" href="#choosing-camera-type" title="Permalink to this headline">¶</a></h2>
<p>Cinema databases support multiple camera types. VisIt’s Cinema export supports
static cameras and phi-theta cameras. A static camera corresponds to the view
that is currently in effect in the visualization and when it is used, all time
states in the Cinema database will be viewed from that camera orientation. A
phi-theta camera defines 2 angles, phi and theta, that define the view direction
as in a spherical coordinate system. When a phi-theta camera is used, the
Cinema export will save the visualization from a multitude of different camera
orientations. This allows the user later in the Cinema viewer to interactively
rotate around the object much as though the object was live instead of just
a collection of image frames. The camera type can be selected using the
<strong>Camera type</strong> control in the <strong>Save Cinema</strong> wizard and either static or
phi-theta cameras can be selected. When a phi-theta camera is selected, the
number of camera angles in the phi and theta dimensions can be set using
the <strong>Phi</strong> and <strong>Theta</strong> controls.</p>
</div>
<div class="section" id="frame-settings">
<h2>5.4.6. Frame settings<a class="headerlink" href="#frame-settings" title="Permalink to this headline">¶</a></h2>
<p>The second tab in the <strong>Save Cinema</strong> wizard
(see <a class="reference internal" href="#save-cinema-wizard-2"><span class="std std-numref">Figure 5.14</span></a>) contains controls that select the
range and stride of time states that will be included in the Cinema database. Use
the <strong>Frame start</strong> controls to select the beginning time state for the Cinema
database. A value of zero corresponds to the first time state. Use the
<strong>Frame end</strong> controls to set the last time state that will be included in the
Cinema database. Finally, use the <strong>Frame stride</strong> controls to set the stride
that will be used between the start and end time states, which is useful when
making shorter preview databases that vary over time but do not include all
time states.</p>
<div class="figure" id="id3">
<span id="save-cinema-wizard-2"></span><img alt="../../_images/savecinemawizard2.png" src="../../_images/savecinemawizard2.png" />
<p class="caption"><span class="caption-number">Fig. 5.14 </span><span class="caption-text">Save Cinema wizard (screen 2)</span></p>
</div>
</div>
<div class="section" id="saving-cinema-from-libsim">
<h2>5.4.7. Saving Cinema from Libsim<a class="headerlink" href="#saving-cinema-from-libsim" title="Permalink to this headline">¶</a></h2>
<p>It is possible to use VisIt’s Libsim to directly save Cinema databases in situ
from an instrumented simulation. This means that the Cinema database can be generated
incrementally as the simulation runs, making it possible to periodically check
in on the simulation by viewing the Cinema database. To add Cinema support to
a simulation instrumented with Libsim, there are 3 calls that need to be made.
First, the simulation must call <code class="docutils literal notranslate"><span class="pre">VisItBeginCinema</span></code>, which passes the parameters
that describe the Cinema database format and returns a handle to a Cinema object.
Next, the simulation must call <code class="docutils literal notranslate"><span class="pre">VisItSaveCinema</span></code> to make Libsim generate and
add the appropriate images to the Cinema database, taking into account the type
of camera being used. The <code class="docutils literal notranslate"><span class="pre">VisItSaveCinema</span></code> function can be called repeatedly
to add new time states to the Cinema database. It is the simulation’s responsibility
to make Libsim calls that set up VisIt plots or restore a session so there are
plots when <code class="docutils literal notranslate"><span class="pre">VisItSaveCinema</span></code> is called. Finally, the simulation must call
<code class="docutils literal notranslate"><span class="pre">VisItEndCinema</span></code> to close out the Cinema database context and free associated
memory. A working example can be found in the
<a class="reference external" href="http://visit.ilight.com/svn/visit/trunk/src/tools/DataManualExamples/Simulations/batch.c">batch simulation example</a>
in VisIt’s simulation directory. The overall call structure for creating a Cinema
database looks something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">visit_handle</span> <span class="n">h</span> <span class="o">=</span> <span class="n">VISIT_INVALID_HANDLE</span><span class="p">;</span>
<span class="n">visit_handle</span> <span class="n">hvar</span> <span class="o">=</span> <span class="n">VISIT_INVALID_HANDLE</span><span class="p">;</span>
<span class="n">double</span> <span class="n">time_value</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">;</span>
<span class="n">VisItBeginCinema</span><span class="p">(</span><span class="o">&amp;</span><span class="n">h</span><span class="p">,</span> <span class="s2">&quot;visit.cdb&quot;</span><span class="p">,</span> <span class="n">VISIT_CINEMA_SPEC_A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">VISIT_IMAGEFORMAT_PNG</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span>
                 <span class="n">VISIT_CINEMA_CAMERA_PHI_THETA</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span>
                 <span class="n">hvar</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/*</span> <span class="n">Simulation</span> <span class="n">main</span> <span class="n">loop</span> <span class="o">*/</span>
<span class="p">{</span>
    <span class="o">/*</span> <span class="n">Compute</span><span class="o">...</span> <span class="o">*/</span>

    <span class="n">VisItSaveCinema</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">time_value</span><span class="p">);</span>

<span class="p">}</span>

<span class="n">VisItEndCinema</span><span class="p">(</span><span class="n">h</span><span class="p">);</span>
</pre></div>
</div>
<p>The above code example will generate a Cinema database using the plots that have
been set up elsewhere using Libsim. Since Cinema output may sometimes serve
as the only simulation data product, it can be useful to save out additional
variables. The last argument to <code class="docutils literal notranslate"><span class="pre">VisItBeginCinema</span></code> is a handle to a name
list object. When the handle is set to <code class="docutils literal notranslate"><span class="pre">VISIT_INVALID_HANDLE</span></code>, there is
no name list and the argument does nothing. If instead, the name list is
created and filled with a list of variable names from the simulation, the
VisIt plots will have their variables changed to the variables in the name
list and Libsim will generate a Cinema database with images for each
variable. The variable becomes a parameter in the Cinema viewer. A name list
object is created and populated like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">visit_handle</span> <span class="n">hvar</span><span class="p">;</span>
<span class="n">VisIt_NameList_alloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hvar</span><span class="p">);</span>
<span class="n">VisIt_NameList_addName</span><span class="p">(</span><span class="n">hvar</span><span class="p">,</span> <span class="s2">&quot;pressure&quot;</span><span class="p">);</span>
<span class="n">VisIt_NameList_addName</span><span class="p">(</span><span class="n">hvar</span><span class="p">,</span> <span class="s2">&quot;rho&quot;</span><span class="p">);</span>
<span class="n">VisIt_NameList_addName</span><span class="p">(</span><span class="n">hvar</span><span class="p">,</span> <span class="s2">&quot;energy&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Exporting_databases.html" class="btn btn-neutral float-right" title="5.5. Exporting databases" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Saving_movies.html" class="btn btn-neutral" title="5.3. Saving movies" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, LLNL, UCRL-SM-220449.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>