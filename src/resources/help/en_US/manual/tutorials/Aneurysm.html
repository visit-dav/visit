

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Aneurysm &mdash; VisIt User Manual 2.11 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="VisIt User Manual 2.11 documentation" href="../index.html"/>
        <link rel="up" title="VisIt Tutorials" href="index.html"/>
        <link rel="next" title="5. Potential Flow" href="PotentialFlow.html"/>
        <link rel="prev" title="3. Scripting" href="Scripting.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> VisIt User Manual
          

          
          </a>

          
            
            
              <div class="version">
                local build
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gui_manual/index.html">GUI Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli_manual/index.html">CLI Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="VisIt_Basics.html">1. VisIt Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Data_Analysis.html">2. Data Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="Scripting.html">3. Scripting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Aneurysm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#open-the-dataset">4.1. Open the dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-the-mesh-topology">4.2. Plotting the mesh topology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-mesh-plot">4.2.1. Create a Mesh plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modify-the-mesh-plot-settings">4.2.2. Modify the Mesh plot settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-the-mesh-properties">4.2.3. Query the mesh properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-exercises">4.2.4. Additional exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examining-scalar-fields">4.3. Examining scalar fields</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#query-the-maximum-pressure-over-time">4.3.1. Query the maximum pressure over time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">4.3.2. Additional exercises</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#contours-and-sub-volumes-of-high-velocity">4.4. Contours and sub-volumes of high velocity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examining-the-velocity-magnitude">4.4.1. Examining the velocity magnitude</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#creating-a-semi-transparent-exterior-mesh-plot">4.4.1.1. Creating a semi-transparent exterior mesh plot</a></li>
<li class="toctree-l5"><a class="reference internal" href="#contours-of-high-velocity">4.4.1.2. Contours of high velocity</a></li>
<li class="toctree-l5"><a class="reference internal" href="#sub-volumes-of-high-velocity">4.4.1.3. Sub-volumes of high velocity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#visualizing-the-velocity-vector-field">4.5. Visualizing the velocity vector field</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plotting-the-vector-field-directly-with-glyphs">4.5.1. Plotting the vector field directly with glyphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examining-features-of-the-flow-field-with-streamlines">4.5.2. Examining features of the flow field with streamlines</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#query-to-find-the-maximum-velocity-on-the-slice">4.5.2.1. Query to find the maximum velocity on the slice</a></li>
<li class="toctree-l5"><a class="reference internal" href="#plotting-streamlines-of-velocity">4.5.2.2. Plotting streamlines of velocity</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#examining-features-of-the-flow-field-with-pathlines">4.5.3. Examining features of the flow field with pathlines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#publishing-to-seedme-org">4.6. Publishing to SeedMe.org</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#required-setup">4.6.1. Required setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sharing-automation-script">4.6.2. Sharing automation script</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#calculating-the-flux-of-a-velocity-field-through-a-surface">4.7. Calculating the flux of a velocity field through a surface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-slice-and-showing-velocity-glyphs">4.7.1. Creating the slice and showing velocity glyphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-vector-expression-and-using-the-deferexpression-operator">4.7.2. Creating a vector expression and using the DeferExpression operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calculating-the-flux-on-the-slice">4.7.3. Calculating the flux on the slice</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="PotentialFlow.html">5. Potential Flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_manual/index.html">Developer Manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VisIt User Manual</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">VisIt Tutorials</a> &raquo;</li>
        
      <li>4. Aneurysm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/Aneurysm.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aneurysm">
<span id="blood-flow-aneurysm"></span><h1>4. Aneurysm<a class="headerlink" href="#aneurysm" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>This tutorial provides a short introduction to VisIt’s features while exploring a finite element blood flow simulation of an aneurysm. The simulation was run using the LifeV finite element solver and made available for this tutorial thanks to Gilles Fourestey and Jean Favre, <a class="reference external" href="http://www.cscs.ch/">Swiss National Supercomputing Centre</a>.</p>
<div class="section" id="open-the-dataset">
<h2>4.1. Open the dataset<a class="headerlink" href="#open-the-dataset" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Click on the <em>Open</em> icon to bring up the File open window.</li>
<li>Navigate your file system to the folder containing “aneurysm.visit”.</li>
<li>Highlight the file “aneurysm.visit” and then click <em>OK</em>.</li>
</ol>
</div>
<div class="section" id="plotting-the-mesh-topology">
<h2>4.2. Plotting the mesh topology<a class="headerlink" href="#plotting-the-mesh-topology" title="Permalink to this headline">¶</a></h2>
<p>First we will examine the finite element mesh used in the blood flow simulation.</p>
<div class="section" id="create-a-mesh-plot">
<h3>4.2.1. Create a Mesh plot<a class="headerlink" href="#create-a-mesh-plot" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Mesh-&gt;Mesh</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id2">
<img alt="../_images/Aneurysm-MeshPlotAdd.png" src="../_images/Aneurysm-MeshPlotAdd.png" />
<p class="caption"><span class="caption-number">Fig. 4.78 </span><span class="caption-text">Adding a mesh plot.</span></p>
</div>
<p>After this, the mesh plot is rendered in <a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s Viewer window.
Modify the view by rotating and zooming in the viewer window.</p>
</div>
<div class="section" id="modify-the-mesh-plot-settings">
<h3>4.2.2. Modify the Mesh plot settings<a class="headerlink" href="#modify-the-mesh-plot-settings" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Double click on the Mesh plot to open the Mesh plot attributes window.</li>
</ol>
<div class="figure" id="id3">
<img alt="../_images/Aneurysm-MeshAttributes.png" src="../_images/Aneurysm-MeshAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.79 </span><span class="caption-text">The mesh plot attributes window.</span></p>
</div>
<ol class="arabic simple" start="2">
<li>Experiment with settings for:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><em>Mesh color</em></li>
<li><em>Opaque color</em></li>
<li><em>Opaque mode</em> - When the Mesh plot’s opaque mode is set to automatic, the Mesh plot will be drawn in opaque mode unless it is forced to share the visualization window with other plots, at which point the Mesh plot is drawn in wireframe mode. When the Mesh plot is drawn in wireframe mode, only the edges of each externally visible cell face are drawn, which prevents the Mesh plot from interfering with the appearance of other plots. In addition to having an automatic opaque mode, the Mesh plot can be forced to be drawn in opaque mode or wireframe mode by selecting the <em>On</em> or <em>Off</em>. This is best demonstrated with the Pseudocolor plot of pressure present.</li>
<li><em>Show internal zones</em></li>
</ul>
</div></blockquote>
<p>You will need to click <em>Apply</em> to commit the settings to your plot.</p>
<div class="figure" id="id4">
<img alt="../_images/Aneurysm-Mesh.png" src="../_images/Aneurysm-Mesh.png" />
<p class="caption"><span class="caption-number">Fig. 4.80 </span><span class="caption-text">The mesh plot of the aneurysm.</span></p>
</div>
</div>
<div class="section" id="query-the-mesh-properties">
<h3>4.2.3. Query the mesh properties<a class="headerlink" href="#query-the-mesh-properties" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s Query interface provides several quantitative data summarization
operations. We will use the query interface to learn some basic information
about the simulation mesh.</p>
<ol class="arabic simple">
<li>Go to <em>Controls-&gt;Query</em> to bring up the Query window.</li>
<li>Select <em>NumZones</em> and click <em>Query</em>.<ul>
<li>This returns the number of elements in the mesh.</li>
</ul>
</li>
<li>Select <em>NumNodes</em> and click <em>Query</em>.<ul>
<li>This returns the number of vertices in the mesh</li>
</ul>
</li>
</ol>
<p>Note: The terms “zones”, “elements”, and “cells” are overloaded in
scientific visualization, as are the terms “nodes”, “points”, and
“vertices”.</p>
</div>
<div class="section" id="additional-exercises">
<h3>4.2.4. Additional exercises<a class="headerlink" href="#additional-exercises" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>What type of finite element was used to construct the mesh?</li>
<li>How many elements are used to construct the mesh?</li>
<li>How many vertices are used to construct the mesh?</li>
<li>On average, how many vertices are shared per element?</li>
</ul>
</div>
</div>
<div class="section" id="examining-scalar-fields">
<h2>4.3. Examining scalar fields<a class="headerlink" href="#examining-scalar-fields" title="Permalink to this headline">¶</a></h2>
<p>In addition to the mesh topology, this dataset provides two mesh fields:</p>
<ul class="simple">
<li>A scalar field “pressure”, associated with the mesh vertices.</li>
<li>A vector field “velocity”, associated with the mesh vertices.</li>
</ul>
<p><a class="reference external" href="https://visit.llnl.gov">VisIt</a> automatically defines an expression that allows us to use the magnitude
of the “velocity” vector field as a scalar field on the mesh. The result of
the expression is a new field named “velocity_magnitude”.</p>
<p>We will use Pseudocolor plots to examine the “pressure” and
“velocity_magnitude” fields.</p>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Pseudocolor-&gt;Pressure</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Double click on the Pseudocolor plot to bring up the Pseudocolor plot attributes window.</li>
<li>Change the color table to <em>Spectral</em> and check the <em>Invert</em> button.</li>
<li>Click <em>Apply</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Click <em>Play</em> in the <em>Time</em> animation controls above the plot list on the main <em>GUI</em> window.</li>
</ol>
<p>You will see the pressure field animate on the exterior of the mesh as the
simulation evolves.</p>
<div class="figure" id="id5">
<img alt="../_images/Aneurysm-PseudocolorPressure.png" src="../_images/Aneurysm-PseudocolorPressure.png" />
<p class="caption"><span class="caption-number">Fig. 4.81 </span><span class="caption-text">The pseudocolor plot of the pressure.</span></p>
</div>
<p>Experiment with:</p>
<ul class="simple">
<li>Setting the Pseudocolor plot limits.</li>
<li>Hiding and showing the Mesh plot.</li>
</ul>
<p>When you are done experimenting, stop animating over time steps using the
<em>Stop</em> button.</p>
<div class="section" id="query-the-maximum-pressure-over-time">
<h3>4.3.1. Query the maximum pressure over time<a class="headerlink" href="#query-the-maximum-pressure-over-time" title="Permalink to this headline">¶</a></h3>
<p>We can use the “pressure” field to extract the heart beat signal. We want to
find the maximum pressure value across the mesh elements at each time step
of our dataset. <a class="reference external" href="https://visit.llnl.gov">VisIt</a> provides a <em>Query over time</em> mechanism that allows us
to extract this data.</p>
<p>First, we need to set our query options to use timestep as the independent
variable for our query.</p>
<ol class="arabic simple">
<li>Go to <em>Controls-&gt;Query over time options</em>.</li>
<li>Select <em>Timestep</em>.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
</ol>
<div class="figure" id="id6">
<img alt="../_images/Aneurysm-QueryOverTimeAttributes.png" src="../_images/Aneurysm-QueryOverTimeAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.82 </span><span class="caption-text">The QueryOverTime attributes window.</span></p>
</div>
<p>Now we can execute the <em>Max</em> query on all of our time steps and collect the
results into a curve.</p>
<ol class="arabic simple">
<li>Click on the Pseudocolor plot to make sure it is active.</li>
<li>Go to <em>Controls-&gt;Query</em> to bring up the Query window.</li>
<li>Select <em>Max</em>.</li>
<li>Check <em>Do Time Query</em>.</li>
<li>Click <em>Query</em>.</li>
</ol>
<p>This will process the simulation output files and create a new window with
a curve that contains the maximum pressure value at each time.</p>
<div class="figure" id="id7">
<img alt="../_images/Aneurysm-QueryOverTime.png" src="../_images/Aneurysm-QueryOverTime.png" />
<p class="caption"><span class="caption-number">Fig. 4.83 </span><span class="caption-text">The query over time plot.</span></p>
</div>
</div>
<div class="section" id="id1">
<h3>4.3.2. Additional exercises<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>How many heart beats does this dataset cover?</li>
<li>Estimate the number of beats per minute of the simulated heart (each cycle is 0.005 seconds).</li>
</ul>
</div>
</div>
<div class="section" id="contours-and-sub-volumes-of-high-velocity">
<h2>4.4. Contours and sub-volumes of high velocity<a class="headerlink" href="#contours-and-sub-volumes-of-high-velocity" title="Permalink to this headline">¶</a></h2>
<div class="section" id="examining-the-velocity-magnitude">
<h3>4.4.1. Examining the velocity magnitude<a class="headerlink" href="#examining-the-velocity-magnitude" title="Permalink to this headline">¶</a></h3>
<p>Next we create a Pseudocolor plot to look at the magnitude of the “velocity”
vector field.</p>
<ol class="arabic simple">
<li>Delete all your existing plots by selecting them all and clicking <em>Delete</em>.</li>
<li>Go to <em>Add-&gt;Pseudocolor-&gt;velocity_magnitude</em>.</li>
<li>Open the Pseudocolor plot attributes window and set the color table options as before.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id8">
<img alt="../_images/Aneurysm-PseudocolorVelocityMagnitude.png" src="../_images/Aneurysm-PseudocolorVelocityMagnitude.png" />
<p class="caption"><span class="caption-number">Fig. 4.84 </span><span class="caption-text">The pseudocolor plot of the velocity magnitude.</span></p>
</div>
<p>Notice that the velocity at the surface of the mesh is zero. To get a better
understanding of the flow inside the mesh, we will use operators to extract
regions of high blood flow.</p>
<div class="section" id="creating-a-semi-transparent-exterior-mesh-plot">
<h4>4.4.1.1. Creating a semi-transparent exterior mesh plot<a class="headerlink" href="#creating-a-semi-transparent-exterior-mesh-plot" title="Permalink to this headline">¶</a></h4>
<p>When looking at features inside the mesh, it helps to have a partially
transparent view of the whole mesh boundary for reference. We will add a
Subset plot to create this view of the mesh boundary.</p>
<ol class="arabic simple">
<li>Uncheck <em>Apply operators to all plots</em>.</li>
</ol>
<div class="figure" id="id9">
<img alt="../_images/Aneurysm-ApplyOperatorsToAllPlots.png" src="../_images/Aneurysm-ApplyOperatorsToAllPlots.png" />
<p class="caption"><span class="caption-number">Fig. 4.85 </span><span class="caption-text">The apply operators to all plots setting.</span></p>
</div>
<ol class="arabic simple" start="2">
<li>Go to <em>Add-&gt;Subset-&gt;Mesh</em>.</li>
<li>Open the Subset plot attributes window.</li>
<li>Change the color to <em>Light Blue</em>.</li>
<li>Set the <em>Opacity</em> slider to <em>25%</em>.</li>
<li>Click <em>Apply</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id10">
<img alt="../_images/Aneurysm-Subset.png" src="../_images/Aneurysm-Subset.png" />
<p class="caption"><span class="caption-number">Fig. 4.86 </span><span class="caption-text">The transparent subset plot.</span></p>
</div>
</div>
<div class="section" id="contours-of-high-velocity">
<h4>4.4.1.2. Contours of high velocity<a class="headerlink" href="#contours-of-high-velocity" title="Permalink to this headline">¶</a></h4>
<p>Now we will extract contour surfaces at high velocity values using the
Isosurface operator.</p>
<ol class="arabic simple">
<li>Select the Pseudocolor plot in the plot list.</li>
<li>Go to <em>Operators-&gt;Slicing-&gt;Isosurface</em>.</li>
<li>Open the Isosurface operator attributes window.</li>
<li>Set <em>Select by</em> to <em>Value</em>, and use “10 15 20”.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em> and press the <em>Play</em> button to animate the plot over time.</li>
</ol>
<p>You will see the contour surfaces extracted from the “velocity_magnitude”
field animate as the simulation evolves.</p>
<div class="figure" id="id11">
<img alt="../_images/Aneurysm-SubsetIsoSurface.png" src="../_images/Aneurysm-SubsetIsoSurface.png" />
<p class="caption"><span class="caption-number">Fig. 4.87 </span><span class="caption-text">The transparent subset plot with iso surfaces of velocity magnitude.</span></p>
</div>
</div>
<div class="section" id="sub-volumes-of-high-velocity">
<h4>4.4.1.3. Sub-volumes of high velocity<a class="headerlink" href="#sub-volumes-of-high-velocity" title="Permalink to this headline">¶</a></h4>
<p>As an alternative to contours, we can also extract the sub-volume between
two scalar values using the Isovolume operator.</p>
<ol class="arabic simple">
<li>Click <em>Stop</em> to stop the animation.</li>
<li>Remove the Isosurface operator.</li>
<li>Go to <em>Operators-&gt;Selection-&gt;Isovolume</em>.</li>
<li>Open the Isovolume operator attributes window.</li>
<li>Set the <em>Lower bound</em> to “10” and the <em>Upper Bound</em> to “20”.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em> and press the <em>Play</em> button to animate the plot over time.</li>
</ol>
<div class="figure" id="id12">
<img alt="../_images/Aneurysm-SubsetIsoVolume.png" src="../_images/Aneurysm-SubsetIsoVolume.png" />
<p class="caption"><span class="caption-number">Fig. 4.88 </span><span class="caption-text">The transparent subset plot with an iso volume of velocity magnitude.</span></p>
</div>
</div>
</div>
</div>
<div class="section" id="visualizing-the-velocity-vector-field">
<h2>4.5. Visualizing the velocity vector field<a class="headerlink" href="#visualizing-the-velocity-vector-field" title="Permalink to this headline">¶</a></h2>
<p>This section of the tutorial outlines using glyphs, streamlines, and pathlines
to visualize the velocity vector field from the simulation.</p>
<div class="section" id="plotting-the-vector-field-directly-with-glyphs">
<h3>4.5.1. Plotting the vector field directly with glyphs<a class="headerlink" href="#plotting-the-vector-field-directly-with-glyphs" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s Vector plot renders a vector field at each time step as a collection
of arrow glyphs. This allows us to see the direction of the vectors as well
as their magnitude. We will create a vector plot to directly view the
simulated “velocity” vector field.</p>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Vector-&gt;velocity</em>.</li>
<li>Open the Vector plot attributes window.</li>
<li>Go to the <em>Vectors</em> tab.</li>
<li>Set <em>Stride</em> to “5”.</li>
<li>Go to the <em>Color</em> section on the <em>Data</em> tab.</li>
<li>Change the <em>Magnitude</em> to <em>Spectral</em>, and check the <em>Invert</em> option.</li>
<li>Go to the <em>Glyphs</em> tab.</li>
<li>In the <em>Scale</em> section, set the <em>Scale</em> to “0.5”.</li>
<li>In the <em>Style</em> section, set <em>Arrow body</em> to <em>Cylinder</em>.</li>
<li>In the <em>Rendering</em> section, set <em>Geometry Quality</em> to <em>High</em>.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Click <em>Play</em>.</li>
</ol>
<div class="figure" id="id13">
<img alt="../_images/Aneurysm-Vector.png" src="../_images/Aneurysm-Vector.png" />
<p class="caption"><span class="caption-number">Fig. 4.89 </span><span class="caption-text">The vector plot of velocity.</span></p>
</div>
</div>
<div class="section" id="examining-features-of-the-flow-field-with-streamlines">
<h3>4.5.2. Examining features of the flow field with streamlines<a class="headerlink" href="#examining-features-of-the-flow-field-with-streamlines" title="Permalink to this headline">¶</a></h3>
<p>To explore the flow field further we will seed and advect a set of streamlines
near the inflow of the artery. Streamlines show the path massless tracer
particles would take if advected by a static vector field. To construct
Streamlines, the first step is selecting a set of spatial locations that
can serve as the initial seed points.</p>
<p>We want to center our seed points around the peak velocity value on a slice
near the inflow of the artery. To find this location, we query a sliced
pseudocolor plot of the “velocity_magnitude”.</p>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Pseudocolor-&gt;velocity_magnitude</em>.</li>
<li>Open the Pseudocolor plot attributes window and set the color table options as before.</li>
<li>Go to <em>Operators-&gt;Slicing-&gt;Slice</em>.</li>
<li>Open the Slice operator attributes window.</li>
<li>In the <em>Normal</em> section set <em>Orthogonal</em> to <em>Y Axis</em>.</li>
<li>In the <em>Origin</em> section select <em>Point</em> and set the value to “3 3 3”.</li>
<li>In the <em>Up Axis</em> section uncheck <em>Project to 2D</em>.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id14">
<img alt="../_images/Aneurysm-PseudocolorSliceVelocityMagnitude.png" src="../_images/Aneurysm-PseudocolorSliceVelocityMagnitude.png" />
<p class="caption"><span class="caption-number">Fig. 4.90 </span><span class="caption-text">The velocity magnitude on a slice.</span></p>
</div>
<div class="section" id="query-to-find-the-maximum-velocity-on-the-slice">
<h4>4.5.2.1. Query to find the maximum velocity on the slice<a class="headerlink" href="#query-to-find-the-maximum-velocity-on-the-slice" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>Click to make sure the Pseudocolor plot of your “velocity_magnitude” slice is active.</li>
<li>Go to <em>Controls-&gt;Query</em>.</li>
<li>Select <em>Max</em>.</li>
<li>Select <em>Actual Data</em>.</li>
<li>Click <em>Query</em>.</li>
</ol>
<p>This will give you the maximum scalar value on the slice and the x,y,z
coordinates of the node associated with this value. We will use the x,y,z
coordinates of this node to seed a set of streamlines.</p>
<div class="figure" id="id15">
<img alt="../_images/Aneurysm-QueryMaxVelocityMagnitude.png" src="../_images/Aneurysm-QueryMaxVelocityMagnitude.png" />
<p class="caption"><span class="caption-number">Fig. 4.91 </span><span class="caption-text">The result of the velocity magnitude query.</span></p>
</div>
</div>
<div class="section" id="plotting-streamlines-of-velocity">
<h4>4.5.2.2. Plotting streamlines of velocity<a class="headerlink" href="#plotting-streamlines-of-velocity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Pseudocolor-&gt;operators-&gt;IntergralCurve-&gt;velocity</em>.</li>
</ol>
<div class="figure" id="id16">
<img alt="../_images/Aneurysm-CreateStreamlinePlot.png" src="../_images/Aneurysm-CreateStreamlinePlot.png" />
<p class="caption"><span class="caption-number">Fig. 4.92 </span><span class="caption-text">Creating a streamline plot with the IntegralCurve operator.</span></p>
</div>
<ol class="arabic simple" start="2">
<li>Open the IntegralCurve operator attributes window.</li>
<li>Go to the <em>Source</em> section on the <em>Integration</em> tab.</li>
<li>Set the <em>Source type</em> to <em>Circle</em>.</li>
<li>Set the <em>Origin</em> to the value returned from the max query: “3.45115 3 5.54927”, excluding any commas in the input text box.</li>
<li>Set the  <em>Normal</em> to the y-axis: “0 1 0”.</li>
<li>Set the  <em>Up axis</em> to the z-axis: “0 0 1”.</li>
<li>Set the <em>Radius</em> to “0.12”.</li>
<li>Go to the <em>Sampling</em> section.</li>
<li>Set <em>Sampling along:</em> to <em>Boundary</em>.</li>
<li>Set <em>Samples in Theta:</em> to “12”.</li>
<li>Go to the <em>Advanced</em> tab.</li>
<li>In the <em>Warnings</em> section, uncheck all of the warning checkboxes.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
</ol>
<div class="figure" id="id17">
<img alt="../_images/Aneurysm-IntegralCurveAttributes.png" src="../_images/Aneurysm-IntegralCurveAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.93 </span><span class="caption-text">The IntegralCurve operator attributes.</span></p>
</div>
<ol class="arabic simple" start="15">
<li>Open the Pseudocolor plot attributes window.</li>
<li>Go to the <em>Data</em> tab.</li>
<li>In the <em>Color</em> section set the <em>Color table</em> to <em>Reds</em>.</li>
</ol>
<div class="figure" id="id18">
<img alt="../_images/Aneurysm-PseudocolorDataAttributes.png" src="../_images/Aneurysm-PseudocolorDataAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.94 </span><span class="caption-text">The Pseudocolor attributes for the streamline data.</span></p>
</div>
<ol class="arabic simple" start="18">
<li>Go to the <em>Line</em> section on the <em>Geometry</em> tab.</li>
<li>Set <em>Line type</em> to <em>Tubes</em>.</li>
<li>Set <em>Tail</em> to <em>Sphere</em>.</li>
<li>Set <em>Head</em> to <em>Cone</em>.</li>
<li>Set the head and tail <em>Radius</em> to “0.03”.</li>
</ol>
<div class="figure" id="id19">
<img alt="../_images/Aneurysm-PseudocolorGeometryAttributes.png" src="../_images/Aneurysm-PseudocolorGeometryAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.95 </span><span class="caption-text">The Pseudocolor attributes for the streamline geometry.</span></p>
</div>
<ol class="arabic simple" start="23">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Use the time slider controls to view a few time steps.</li>
</ol>
<div class="figure" id="id20">
<img alt="../_images/Aneurysm-Streamlines.png" src="../_images/Aneurysm-Streamlines.png" />
<p class="caption"><span class="caption-number">Fig. 4.96 </span><span class="caption-text">The streamlines of velocity.</span></p>
</div>
</div>
</div>
<div class="section" id="examining-features-of-the-flow-field-with-pathlines">
<h3>4.5.3. Examining features of the flow field with pathlines<a class="headerlink" href="#examining-features-of-the-flow-field-with-pathlines" title="Permalink to this headline">¶</a></h3>
<p>Finally, to explore the time varying behavior of the flow field we will
use pathlines. Pathlines show the path massless tracer particles would
take if advected by the vector field at each timestep of the simulation.</p>
<p>We will modify our previous IntergralCurve options to create pathlines.</p>
<ol class="arabic simple">
<li>Set the time slider controls to the first timestep.</li>
<li>Open the IntegralCurve attributes window.</li>
<li>Go to the <em>Apperance</em> tab.</li>
<li>In the <em>Streamlines vs Pathlines</em> section select <em>Pathline</em>.</li>
<li>In the <em>Pathlines Options</em> section set <em>How to perform interpolation over time</em> to <em>Mesh is static over time</em>.</li>
</ol>
<div class="figure" id="id21">
<img alt="../_images/Aneurysm-IntegralCurvePathlineAttributes.png" src="../_images/Aneurysm-IntegralCurvePathlineAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.97 </span><span class="caption-text">The IntegralCurve operator pathline attributes.</span></p>
</div>
<ol class="arabic simple" start="6">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
</ol>
<p>This will process all 200 files in the dataset and construct the pathlines
that originate at our seed points.</p>
<div class="figure" id="id22">
<img alt="../_images/Aneurysm-Pathlines.png" src="../_images/Aneurysm-Pathlines.png" />
<p class="caption"><span class="caption-number">Fig. 4.98 </span><span class="caption-text">The pathlines of velocity.</span></p>
</div>
</div>
</div>
<div class="section" id="publishing-to-seedme-org">
<h2>4.6. Publishing to SeedMe.org<a class="headerlink" href="#publishing-to-seedme-org" title="Permalink to this headline">¶</a></h2>
<div class="section" id="required-setup">
<h3>4.6.1. Required setup<a class="headerlink" href="#required-setup" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://www.seedme.org/user">Sign-in</a> or <a class="reference external" href="https://www.seedme.org/user/register">Sign-up</a> at SeedMe.org.</li>
<li><a class="reference external" href="https://www.seedme.org/user">Download</a> your “API Key file”, then move it to your <a class="reference external" href="https://en.wikipedia.org/wiki/Home_directory">Home directory</a>.</li>
</ul>
</div>
<div class="section" id="sharing-automation-script">
<h3>4.6.2. Sharing automation script<a class="headerlink" href="#sharing-automation-script" title="Permalink to this headline">¶</a></h3>
<p>In this section we will render and save pathline trace in 20 steps. Then
upload and share the rendered 20 images as a sequence and instuct SeedMe to
encode a video from these set of images at 2 frames per second. A sample
video can be seen <a class="reference external" href="https://www.seedme.org/node/49054#videos">here</a>.</p>
<p>A detailed example with a brief explanation in the comments can be seen
<a class="reference external" href="https://bitbucket.org/seedme/seedme-python-client/src/master/demo.py?at=master&amp;fileviewer=file-view-default">here</a>.</p>
<ol class="arabic">
<li><p class="first">Go to <em>Controls-&gt;Command</em>.</p>
</li>
<li><p class="first">Find an empty tab.</p>
</li>
<li><p class="first">Paste the following Python snippet into this tab.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># file: aneurysm_seedme.py</span>
<span class="c1"># info:</span>
<span class="c1"># Example showing how to use SeedMe to publish a pathline animation</span>
<span class="c1">#</span>

<span class="c1">##############################################################################</span>
<span class="c1"># To do : Set the following four variables</span>
<span class="c1">##############################################################################</span>
<span class="n">seedme_apikey_path</span> <span class="o">=</span> <span class="s1">&#39;/absolute/path/to/seedme.txt&#39;</span>
<span class="n">my_rendered_image_path</span> <span class="o">=</span> <span class="s2">&quot;/absolute/path/for/images/&quot;</span> <span class="c1"># does not traverse recursively</span>
<span class="n">my_content_privacy</span> <span class="o">=</span> <span class="s2">&quot;public&quot;</span> <span class="c1"># private (default), group, public</span>
<span class="n">my_share_list</span> <span class="o">=</span> <span class="s2">&quot;one@example.com, two@example.com&quot;</span> <span class="c1"># comma delimited emails</span>


<span class="c1"># Set save window attributes including path where the rendered images will be saved</span>
<span class="n">sa</span> <span class="o">=</span> <span class="n">SaveWindowAttributes</span><span class="p">()</span>
<span class="n">sa</span><span class="o">.</span><span class="n">outputToCurrentDirectory</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">outputDirectory</span> <span class="o">=</span> <span class="n">my_rendered_image_path</span>
<span class="n">sa</span><span class="o">.</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;pathline&quot;</span>
<span class="n">sa</span><span class="o">.</span><span class="n">family</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sa</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">PNG</span>
<span class="n">sa</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">512</span>
<span class="n">sa</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">512</span>
<span class="n">sa</span><span class="o">.</span><span class="n">screenCapture</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">saveTiled</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="mi">80</span>
<span class="n">sa</span><span class="o">.</span><span class="n">progressive</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">binary</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">stereo</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">compression</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">PackBits</span>  <span class="c1"># None, PackBits, Jpeg, Deflate</span>
<span class="n">sa</span><span class="o">.</span><span class="n">forceMerge</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sa</span><span class="o">.</span><span class="n">resConstraint</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">ScreenProportions</span>  <span class="c1"># NoConstraint, EqualWidthHeight, ScreenProportions</span>
<span class="n">sa</span><span class="o">.</span><span class="n">advancedMultiWindowSave</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">SetSaveWindowAttributes</span><span class="p">(</span><span class="n">sa</span><span class="p">)</span>


<span class="c1"># Now save this pathline visualization in 20 frames (images)</span>
<span class="c1"># Animate our pathlines by cropping based on time</span>
<span class="n">iatts</span> <span class="o">=</span> <span class="n">IntegralCurveAttributes</span><span class="p">()</span>
<span class="n">iatts</span><span class="o">.</span><span class="n">cropValue</span> <span class="o">=</span> <span class="n">iatts</span><span class="o">.</span><span class="n">Time</span>
<span class="n">iatts</span><span class="o">.</span><span class="n">cropEndFlag</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">nsteps</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1"># Number of steps</span>
<span class="n">final_time</span> <span class="o">=</span> <span class="o">.</span><span class="mi">995</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nsteps</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">iatts</span><span class="o">.</span><span class="n">cropEnd</span> <span class="o">=</span> <span class="n">final_time</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span><span class="n">nsteps</span>
    <span class="n">SetOperatorOptions</span><span class="p">(</span><span class="n">iatts</span><span class="p">)</span>
    <span class="n">SaveWindow</span><span class="p">()</span> <span class="c1"># will save images at the sa.outputDirectory provided above</span>


<span class="c1"># ----------------------------------------------------------------------------------#</span>
<span class="c1"># Upload and share content at SeedMe.org</span>
<span class="c1"># Instruct the seedme module to upload 20 images then encode a video from it</span>
<span class="c1"># seedme module ships with VisIt 2.9.x +</span>
<span class="c1"># ----------------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">seedme</span>

<span class="c1"># Set path to the APIKey file</span>
<span class="n">obj</span><span class="o">.</span><span class="n">set_auth_via_file</span><span class="p">(</span><span class="n">seedme_apikey_path</span><span class="p">)</span>

<span class="c1"># Create a dictionary for rendered image sequence</span>
<span class="n">my_seq</span> <span class="o">=</span> <span class="p">{</span>
       <span class="s2">&quot;filepath&quot;</span><span class="p">:</span> <span class="n">my_rendered_image_path</span><span class="p">,</span>
       <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Pathline&quot;</span><span class="p">,</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Pathlines show the path massless tracer particles would take if advected by the vector field at each timestep of the simulation.&quot;</span><span class="p">,</span>
       <span class="s2">&quot;fps&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
       <span class="s2">&quot;encode&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
      <span class="p">}</span>

<span class="c1"># Create seedme object</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">seedme</span><span class="o">.</span><span class="n">SeedMe</span><span class="p">()</span>

<span class="c1"># Create a new collection using create_collection method</span>
<span class="c1"># composed with title and sequence with public access, shared with two people</span>
<span class="n">result</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Aneurysm vis&quot;</span><span class="p">,</span>
                             <span class="n">privacy</span><span class="o">=</span><span class="n">my_content_privacy</span><span class="p">,</span>  <span class="c1"># string = One of private(default), group, public</span>
                             <span class="n">sharing</span><span class="o">=</span><span class="n">my_share_list</span><span class="p">,</span> <span class="c1"># string = Comma delimited emails</span>
                             <span class="n">notify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Boolean = False(default) send email notification to above two emails</span>
                             <span class="n">sequences</span><span class="o">=</span><span class="n">my_seq</span><span class="p">,</span> <span class="c1"># upload sequence</span>
                             <span class="p">)</span>

<span class="c1"># create_collection returns the result as a string in json format</span>
<span class="nb">print</span> <span class="n">result</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="c1"># Visit this url on your web browser</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">The url for this collection is: &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Click <em>Execute</em>.</p>
</li>
</ol>
<p>To view your shared content <a class="reference external" href="https://www.seedme.org/user">login</a> to SeedMe.org
then navigate to <a class="reference external" href="https://www.seedme.org/collections">My collections</a>.</p>
<hr class="docutils" />
<p>To learn more about the SeedMe Python API review the example <a class="reference external" href="https://bitbucket.org/seedme/seedme-python-client/src/master/demo.py?at=master&amp;fileviewer=file-view-default">demo.py</a>.</p>
</div>
</div>
<div class="section" id="calculating-the-flux-of-a-velocity-field-through-a-surface">
<h2>4.7. Calculating the flux of a velocity field through a surface<a class="headerlink" href="#calculating-the-flux-of-a-velocity-field-through-a-surface" title="Permalink to this headline">¶</a></h2>
<p>To calculate a flux, we will need the original velocity vector, the normal
vector of the surface, and <a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s Flux Operator. We will calculate the flux
through a cross-slice located at Y=3, at the beginning of the artery.</p>
<div class="section" id="creating-the-slice-and-showing-velocity-glyphs">
<h3>4.7.1. Creating the slice and showing velocity glyphs<a class="headerlink" href="#creating-the-slice-and-showing-velocity-glyphs" title="Permalink to this headline">¶</a></h3>
<p>First we will directly plot the velocity vectors that exist on the slice
through the 3D mesh.</p>
<ol class="arabic simple">
<li>Delete any existing plots.</li>
<li>Go to <em>Add-&gt;Vector-&gt;velocity</em>.</li>
<li>Open the Vector plot attributes window.</li>
<li>Go to the <em>Vectors</em> tab and set the <em>Fixed number</em> to “40”.</li>
<li>Go to the <em>Glyphs</em> tab.</li>
<li>Set <em>Arrow body</em> to <em>Cylinder</em>.</li>
<li>Set <em>Geometry Quality</em> to <em>High</em>.</li>
</ol>
<div class="figure" id="id23">
<img alt="../_images/Aneurysm-VectorAttributes.png" src="../_images/Aneurysm-VectorAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.99 </span><span class="caption-text">The Vector plot attributes.</span></p>
</div>
<ol class="arabic simple" start="8">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Go to <em>Operators-&gt;Slicing-&gt;Slice</em>.</li>
<li>Open the Slice operator attributes window.</li>
<li>Set <em>Normal</em> to <em>Arbitrary</em> and to “0 1 0”.</li>
<li>Set <em>Origin</em> to <em>Intercept</em> and to “3”.</li>
<li>Uncheck <em>Project to 2D</em>.</li>
<li>Click <em>Make default</em>, <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id24">
<img alt="../_images/Aneurysm-SliceAttributes.png" src="../_images/Aneurysm-SliceAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.100 </span><span class="caption-text">The Slice operator attributes.</span></p>
</div>
<p>In order to give some context to the Vector plot of velocity on the slice
let’s add a Pseudocolor plot of velocity_magnitude on the same slice and
a Mesh plot.</p>
<ol class="arabic simple" start="16">
<li>Go to <em>Add-&gt;Pseudocolor-&gt;velocity_magnitude</em>.</li>
<li>Open the Pseudocolor plot attributes window.</li>
<li>Set <em>Limits</em> to <em>Use Current Plot</em>.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Go to <em>Operators-&gt;Slicing-&gt;Slice</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Go to <em>Add-&gt;Mesh-&gt;Mesh</em>.</li>
<li>Open the Mesh plot attributes window.</li>
<li>Set <em>Mesh color</em> to <em>Custom</em> and select a medium grey color.</li>
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
<li>Zoom in to explore the plot results.</li>
</ol>
<div class="figure" id="id25">
<img alt="../_images/Aneurysm-VectorSlice.png" src="../_images/Aneurysm-VectorSlice.png" />
<p class="caption"><span class="caption-number">Fig. 4.101 </span><span class="caption-text">The velocity on the slice.</span></p>
</div>
<p>The Vector plot uses glyphs to draw portions of the instantaneous vector
field. The arrows are colored according to the speed at each point (the
magnitude of the velocity vector). Next we create an expression to evaluate
the vectors normal to the Slice. These normals should all point in the Y
direction.</p>
</div>
<div class="section" id="creating-a-vector-expression-and-using-the-deferexpression-operator">
<h3>4.7.2. Creating a vector expression and using the DeferExpression operator<a class="headerlink" href="#creating-a-vector-expression-and-using-the-deferexpression-operator" title="Permalink to this headline">¶</a></h3>
<p>We will use <a class="reference external" href="https://visit.llnl.gov">VisIt</a>’s pre-defined expression to evaluate the normals on a
cell-by-cell basis.</p>
<ol class="arabic simple">
<li>Go to <em>Controls-&gt;Expressions</em>.</li>
<li>Click <em>New</em>.</li>
<li>Change the <em>Name</em> to “normals” and the <em>Type</em> to <em>Vector mesh variable</em>.</li>
<li>Go to <em>Insert function-&gt;Miscellaneous-&gt;cell_surface_normal</em> in the <em>Standard editor</em> tab.</li>
<li>Go to <em>Insert variable-&gt;Mesh-&gt;Mesh</em> in the <em>Standard editor</em> tab.</li>
</ol>
<div class="figure" id="id26">
<img alt="../_images/Aneurysm-Expressions.png" src="../_images/Aneurysm-Expressions.png" />
<p class="caption"><span class="caption-number">Fig. 4.102 </span><span class="caption-text">The Expressions window.</span></p>
</div>
<ol class="arabic simple" start="6">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Return to the Vector plot and change its variable to “normals”.</li>
</ol>
<p>You will then get the error message saying: <em>The ‘normals’ expression failed because The Surface normal expression can only be calculated on surfaces. Use the ExternalSurface operator to generate the external surface of this object. You must also use the DeferExpression operator to defer the evaluation of this expression until after the external surface operator</em>. In fact, <a class="reference external" href="https://visit.llnl.gov">VisIt</a> cannot use the name <em>Mesh</em> which refers to the original 3D mesh. It needs to defer the evaluation until after the Slice operator is applied. Thus, we need to add the Defer Expression operator.</p>
<ol class="arabic simple" start="8">
<li>Go to <em>Operators-&gt;Analysis-&gt;DeferExpression</em>.</li>
<li>Open the DeferExpression operator attributes window.</li>
<li>Go to <em>Variables-&gt;Vector-&gt;normals</em>.</li>
</ol>
<div class="figure" id="id27">
<img alt="../_images/Aneurysm-DeferExpression.png" src="../_images/Aneurysm-DeferExpression.png" />
<p class="caption"><span class="caption-number">Fig. 4.103 </span><span class="caption-text">The DeferExpression window.</span></p>
</div>
<ol class="arabic simple" start="11">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id28">
<img alt="../_images/Aneurysm-VectorNormals.png" src="../_images/Aneurysm-VectorNormals.png" />
<p class="caption"><span class="caption-number">Fig. 4.104 </span><span class="caption-text">The Vector plot of the normals.</span></p>
</div>
<ol class="arabic simple" start="13">
<li>Verify that all your normals point in the up (Y) direction.</li>
</ol>
</div>
<div class="section" id="calculating-the-flux-on-the-slice">
<h3>4.7.3. Calculating the flux on the slice<a class="headerlink" href="#calculating-the-flux-on-the-slice" title="Permalink to this headline">¶</a></h3>
<p>We are now ready for the final draw.</p>
<ol class="arabic simple">
<li>Go to <em>Add-&gt;Pseudocolor-&gt;operators-&gt;Flux-&gt;Mesh</em>.</li>
<li>Go to <em>Operators-&gt;Slicing-&gt;Slice</em>.</li>
<li>Open the Slice operator attributes window.</li>
<li>Verify that the default values previously saved are used.</li>
<li>Move the Slice operator above the Flux operator.</li>
<li>Go to <em>Operators-&gt;Analysis-&gt;DeferExpression</em>.</li>
<li>Move the DeferExpression operator above the Flux operator just below the Slice operator.</li>
<li>Open the Flux operator attributes window.</li>
<li>Set the <em>Flow field</em> to “velocity”.</li>
</ol>
<div class="figure" id="id29">
<img alt="../_images/Aneurysm-FluxAttributes.png" src="../_images/Aneurysm-FluxAttributes.png" />
<p class="caption"><span class="caption-number">Fig. 4.105 </span><span class="caption-text">The Flux operator attributes window.</span></p>
</div>
<ol class="arabic simple" start="10">
<li>Click <em>Apply</em> and <em>Dismiss</em>.</li>
<li>Click <em>Draw</em>.</li>
</ol>
<div class="figure" id="id30">
<img alt="../_images/Aneurysm-VectorFlux.png" src="../_images/Aneurysm-VectorFlux.png" />
<p class="caption"><span class="caption-number">Fig. 4.106 </span><span class="caption-text">The Vector plot of the flux.</span></p>
</div>
<p>Verify that you have a display that is cell-centered, and that will vary with
the Time slider</p>
<ol class="arabic simple" start="12">
<li>Get the numerical value of the flux by query-ing for the <em>Weighted Variable Sum</em>.</li>
</ol>
<div class="figure" id="id31">
<img alt="../_images/Aneurysm-QueryWeightedVariableSum.png" src="../_images/Aneurysm-QueryWeightedVariableSum.png" />
<p class="caption"><span class="caption-number">Fig. 4.107 </span><span class="caption-text">The result of the Weighted Variable Sum query.</span></p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PotentialFlow.html" class="btn btn-neutral float-right" title="5. Potential Flow" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Scripting.html" class="btn btn-neutral" title="3. Scripting" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2019, LLNL, UCRL-SM-220449.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>