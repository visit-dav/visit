<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-us">
  <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
  <meta name="ProgId" content="FrontPage.Editor.Document">
  <title>VisIt 3.3 Release Notes</title>
</head>
<body>

<center><b><font size="6">VisIt 3.3 Release Notes</font></b></center>
<center><b><font size="4">October, 2021</font></b></center>

<p>Welcome to VisIt's release notes page. This page describes the important
enhancements and bug-fixes that were added to this release.</p>

<p><b>Sections</b></p>
<ul>
  <li><a href="#General_Features">Features for all users</a></li>
  <li><a href="#Advanced_Features">Features for advanced users</a></li>
  <li><a href="#GUI_Changes">Changes in GUI behavior</a></li>
  <li><a href="#File_format">Changes to file format readers</a></li>
  <li><a href="#Plot_changes">Changes to plots</a></li>
  <li><a href="#Operator_changes">Changes to operators</a></li>
  <li><a href="#Expression_changes">Changes to expressions</a></li>
  <li><a href="#Query_changes">Changes to picks and queries</a></li>
  <li><a href="#Bugs_fixed">Other bug fixes</a></li>
  <li><a href="#Configuration_changes">Configuration changes</a></li>
  <li><a href="#Build_features">Changes for build_visit</a></li>
  <li><a href="#Dev_changes">Changes for VisIt developers</a></li>
</ul>

<a name="General_features"></a>
<p><b><font size="4">General features added in version 3.3</font></b></p>
<ul>
  <li>After a successful Export database, the informational message now contains the host and path to the export.</li>
  <li>Attribute assignment (e.g. <code>cylinderAtts.point1=...</code> or <code>cylinderAtts.SetPoint1(...)</code>) operations were modified to catch and disallow nonsensical usage instead of silently falling back to default values and provide better error checkingand messaging. It is possible these changes may cause code that worked fine to now terminate with a Python exception. In such cases, the resulting error message should explain the cause of the failure and the changes required to fix it should be obvious and minimal.</li>
  <li>A new function was added to the Python CLI named <code>apropos(regex)</code> similar in purpose to <a href="https://en.wikipedia.org/wiki/Apropos_(Unix)">Unix' apropos</a>. It makes finding the names of functions and objects much easier. It will return a list of the names of functions or objects where the regular expression matches either in the method name or in the documentation string for the method or in a stringified instance (objects only). All matching is case insensitive.</li>
  <li>Default behavior of Python's <code>help(thing)</code> was adjusted slightly to first present what <code>help(thing)</code> would normally produce but then to also follow it up with output from <code>apropos(thing)</code> when that output is non-empty.<li>
  <li>The French translation was updated thanks to <a href="https://github.com/cessenat">@cessenat</a>. We are still looking for volunteers for translations in other languages. If interested, please <a href="https://visit-dav.github.io/visit-website/support/">contact us</a>.</li>
  <li>A new (beta) <a href="https://en.wikipedia.org/wiki/Names_given_to_the_Spanish_language">Castilian Spanish</a> translation was created thanks to <a href="https://github.com/cessenat">@cessenat</a> using auto-translation from English. It likely still requires review by someone who is fluent in Spanish and we would welcome any volunteers.</li>
  <li>References to old email lists (@ornl.gov) throughout code and documentation were replaced with references to the help pages of the new website.</li>
  <li>The <code>Pick</code> operator now has the option to include the Euclidean distance between the current and previous <code>Pick</code> in the GUI's output window. To enable this option, check the <code>Distance to previous</code> box. You should then see a new field in the tabular output display titled <code>Distance to previous</code>.</li>
  <li>Support for <i>SeedMe</i> was removed since the service was retired.</li>
  <li>A section was added to the <i>Developer Manual</i> describing process launching.</li>
  <li>A section was added to the <i>Developer Manual</i> describing building VisIt with spack.</li>
  <li>The Blueprint export now supports repartitioning the mesh on output. In the Blueprint export options, select the "Partition" operation and set the target number of domains field.</li>
  <li>The Blueprint export now supports flattening the mesh data on output. In the Blueprint export options, select "Flatten_CSV" to export the mesh data to vertex and element based CSV files, or "Flatten_HDF5" to export the data to a Blueprint "Table" node.</li>
  <li>The Flatten() function has been added to the CLI; this function uses the new avtFlattenQuery to return the active plot data as a tabular, numpy compatible, 2D array.</li>
  <li>Added new mesh expressions 'logical_nodeid', 'logical_zoneid', 'node_domain', 'zone_domain', and 'zone_centers'.</li>
  <li>A tutorial on Python expressions was added to the tutorials section of the manual.</li>
  <li>Added host profile support for machines located at KAUST.</li>
  <li>Changed "active" to "default" for everything related to color tables. This means in the gui, in the python scripting interface, and internally.</li>
  <li>Upgraded ADIOS and ADIOS2 to build with c-blosc, so blosc-compressed ADIOS-based files can now be read by VisIt.</li>
  <li>Added support and examples of 2D structured grids representing surfaces in 3 dimensions.</li>
  <li>A slew of new, color vision deficient (CVD) color tables from <a href="https://www.fabiocrameri.ch/visualisation/">Fabio Crameri</a> were added and assigned the category <code>CvdFriendlyCrameri</code></li>
  <li>Existing Viridis CVD color tables were given a new category name, <code>CvdFriendlyViridis</code></li>
  <li>ColorControlPointsList and GaussianControlPointsList now have a 'SetNum' method for changing the size of the underlying controlPoints list. Control points will be added or removed based on the current size of the list. The SetNum method was also added to the script created by Logging /command recording, so that the control points list has the correct size and the created script can execute correctly without crashing the cli.<li>
</ul>

<a name="Advanced_features"></a>
<p><b><font size="4">Advanced features added in version 3.3</font></b></p>
<ul>
  <li>Advanced Feature 1</li>
  <li>Advanced Feature 2</li>
</ul>

<a name="GUI_changes"></a>
<p><b><font size="4">Changes in GUI behavior for version 3.3</font></b></p>
<ul>
  <li>In the file open window, next to "Open file as type:" when you click "Guess from file name/extension", the list of file types is now sorted in alphabetical case-insensitive order. The same change has been made in the list of Databases in the Plugin Manager.</li>
  <li>In the plugin selection in the file open window, users can now delete the text that is there and start typing the name of the plugin that they wish to open files with, and VisIt will autocomplete the entered text to select a plugin.</li>
  <li>Custom titles for Legend annotation objects can now be set.</li> 
  <li>Dolly and FlyThrough navigation modes now support mouse-wheel interaction for zooming.</li>
  <li>Changing navigation mode (Trackball, Dolly, FlyThrough) will now trigger an automatic View reset.</li>
</ul>

<a name="File_format"></a>
<p><b><font size="4">File format reader changes in version 3.3</font></b></p>
<ul>
  <li>Chombo plugin now supports anisotropic refinements.</li>
  <li>The WData database reader was added.</li>
  <li>Added implicit points topology support to the Blueprint Plugin.</li>
  <li>Added the ability for users to specify the output precision when exporting Xmdv (.okc) files.</li>
  <li>Added polyhedral mesh support to the Blueprint Plugin. Now, if you ask visit to read a polyhedral mesh, it will automatically convert the mesh to a tetrahedral mesh, as well as convert the fields as needed. It will also keep track of original element ids so that you don't see the new lines from the resulting tetrahedra.</li>
  <li>The Xolotl reader was updated to support phase-space.<li>
  <li>SW4 reader was renamed as sw4img to fix static builds.<li>
  <li>NASTRAN reader was adjusted to reduce verbosity of debugX outputs and handle DOS line endings.<li>
  <li>The Blueprint reader now supports the option to choose between two different MFEM low order refinement schemes. The Legacy option is the original LOR scheme used by VisIt, and the new option preserves the continuity of meshes. The new option is enabled by default.</li>
  <li>VisIt-generated expressions are no longer included in VTK, Blueprint, and Silo exports.</li>
</ul>

<a name="Plot_changes"></a>
<p><b><font size="4">Changes to VisIt's plots in version 3.3</font></b></p>
<ul>
  <li>Pseudocolor Plot Limits now say "Use Actual Data" instead of "Use Current Plot".</li>
  <li>Plot Change 2</li>
</ul>

<a name="Operator_changes"></a>
<p><b><font size="4">Changes to VisIt's operators in version 3.3</font></b></p>
<ul>
  <li>Operator Change 1</li>
  <li>Operator Change 2</li>
</ul>

<a name="Expression_changes"></a>
<p><b><font size="4">Changes to VisIt's expression language in version 3.3</font></b></p>
<ul>
  <li>Moved the <i>divergence</i>, <i>curl</i>, <i>Laplacian</i>, and <i>gradient</i> functions from the <i>Miscellaneous</i> submenu to the <i>Vector</i> submenu within the <i>Insert function...</i> menu in the Expressions window. </li>
  <li>Added new <i>ghost_zoneid</i> function to the <i>Mesh</i> submenu in the Expressions window.</li>
  <li>Added new <i>crack_width</i> function to the <i>Misc</i> submenu in the Expressions window.</li>
</ul>

<a name="Query_changes"></a>
<p><b><font size="4">Changes to VisIt's picks and queries in version 3.3</font></b></p>
<ul>
  <li>Upgraded the X Ray Image Query so it can now output conduit blueprint.</li>
  <li>Upgraded the X Ray Image Query so users can now specify an output directory for query results.</li>
</ul>

<a name="Bugs_fixed"></a>
<p><b><font size="4">Other bugs fixed in version 3.3</font></b></p>
<ul>
  <li>Fixed a bug with expression insert-function for constant expressions, so usage is clearer. </li>
  <li>Ensure variable names from PlainText reader have no leading or trailing whitespace.</li>
  <li>Fixed a time slider widget window resize bug so that now the main gui window width is not locked and can be shrunk and expanded.</li>
  <li>VisIt can now build successfully with ADIOS enabled while MPI is disabled.</li>
  <li>Fixed an issue where the list of plugins in the file open window could disappear when selecting plugins from the list multiple times.</li>
  <li>Fixed bug where changing the 'Number format' for a Contour plot's legend would have no affect on the labels next to the tick marks.</li>
  <li>Fixed a bug that prevented users from comparing particular VisIt Python objects in the CLI with non-VisIt types.</li>
  <li>Fixed a crash with libsim when attempting to Export databases that have export options specified as enums.</li>
  <li>Fixed a bug where Right-Clicking in the Viewer Window to access popup menu was preventing mouse-wheel navigation functionality until another mouse click was performed.</li>
  <li>Fixed several bugs with 'Flythrough' navigation mode: multiple calls to ResetView would make the plot disappear; adding new plots would make them disappear from view; issuing a 'Recenter View' would move the camera inside the plot.</li>
  <li>Fixed a bug where bounding box extents would not be reset when 'Scale 3D Axes' was turned off.</li>
  <li>Fixed a cli crash when 'DeleteAllPlots' is called when there are not plots, and a callback has been registered for 'SetActivePlots'.</li>
  <li>Fixed a bug in visit_composite where output formats like bmp, png could not be read back in by VisIt nor used to encode movies.</li>
  <li>Fixed a bug with the Python CLI where the PySide2 module wouldn't load when running one of the pre-built binaries.</li>
  <li>The Contour plot's fields were re-ordered internally to fix a bug where a command-recorded script of Contour plot would crash the cli if number of contours had been increased from the default.</li>
</ul>

<a name="Configuration_changes"></a>
<p><b><font size="4">Configuration changes in version 3.3</font></b></p>
<ul>
  <li>Updated the Ohio Supercomputing Center host profiles.</li>
  <li>Updated the ORNL host file list to include only current machines.</li>
  <li>Renamed the <i>mxterm</i> launch profiles to <i>sxterm</i> in the LLNL host profiles since <i>mxterm</i> has been replaced with <i>sxterm</i>."
  <li>Updated the <i>toss3</i> installations at LLNL so that they would also run on <i>toss4</i> systems.</li>
  <li>Updated the LLNL host profiles for <i>toss</i> systems to use <i>sbatch</i> instead of <i>msub</i> when launching batch jobs.</li>
</ul>

<a name="Build_features"></a>
<p><b><font size="4">Build features added in version 3.3</font></b></p>
<ul>
  <li>Build_visit was modified to do an out-of-source build for Qt.</li>
  <li>Enhanced build_visit to optionally build Qt 5.10.1 instead of Qt 5.14.2. To enable building Qt 5.10.1, add <i>--qt510</i> to the command line.</li>
  <li>Build_visit was enhanced to patch Xdmf so that it builds with gcc 11.2.</li>
</ul>

<a name="Dev_changes"></a>
<p><b><font size="4">Changes for VisIt developers in version 3.3</font></b></p>
<ul>
  <li>VTK-m was updated to version 1.7.0 and VTK-h was updated to version 0.8.0.</li>
  <li>The <i>--dry-run</i> command line option has been removed.</li>
  <li>Added the spack environment files <i>compilers.yaml</i> and <i>packages.yaml</i> for crusher.olcf.ornl.gov.</li>
  <li>There is now a WIN32DEFINES xml tag for database plugins, used to specify preprocessor defines needed by a plugin on Windows. If the needed define comes from a thirdparty library, the Find module for that library should set a CMake var with those defines that the plugin could then use in the .xml file. See FindCGNS.cmake and CGNS.xml for an example.</li>
  <li>The minimum required version of CMake is now 3.14, the version built by build_visit.</li> 
  <li>The programs qtviswinExample, qtvtkExample, qvtkopenglExample were added to help with debugging OpenGL issues.</li>
  <li>VisIt test data archive tooling was changed from 7z to tar with the same (lzma2) compression.</li>
  <li>The version of Conduit was upgraded to 0.8.2.</li>
  <li>VisIt now calculates the topological dimension of the data tree after the data has been retrieved from the database, and after SIL and/or Material selection has been applied. This should aid downstream filters that depend on an accurate topological dimension. For mixed-topology datasets the largest topological dim is what gets reported. Filters that modify topological structure are still required to update the topological dim.</li>
  <li>The DEFINES, CXXFLAGS and LDFLAGS tags in the xml files for plugins now support an optional "components" attribute specifying for which component(s) the tag applies. Currently valid for MDServer("M"), serial Engine ("ESer") and parallel Engine("EPar"). Multiple components may be specified, separated by commas. See ADIOS2.xml or MOAB.xml for an example.</li>
  <li>The DEFINES tag now supports surrounding definitions in quotes if the quotes are important to be carried through. They must be escaped with a '\'. See uintah.xml for an example.</li>
  <li>The version of MFEM was upgraded to 4.4.</li>
  <li>Added the script <i>run-build-visit</i> for running <i>build_visit</i> to build the third party libraries on LLNL systems. The script has the following usage:<br>
    <pre>
    Usage: +"machine name" -v "version" -s "build_visit_script"
    Valid machine names:
        kickit_mesagl (B-Div, Linux, x86_64, mesagl),
        kickit_opengl (B-Div, Linux, x86_64, opengl),
        quartz (LC, Linux, x86_64),
        lassen (LC, Linux, power9),
        rztrona (LC, Linux, x86_64),
        rzansel (LC, Linux, power9),
        jade (LC, Linux, x86_64),
        sierra (LC, Linux, power9)</pre></li>
  <li>Corrected a bug with the regression test suite where the image difference metrics were reported incorrectly in the HTML and JSON output.</li>
  <li>Added <code>TestAutoName()</code> method for automagically naming test baseline files.</li>
  <li>The signature for the SET_UP_THIRD_PARTY function for Find modules was modified to utilize keyword arguments:
    <ul>
     <li><b>LIBS</b> (required) -- the list of libraries to be found</li>
     <li><b>LIBDIR</b> (optional) -- use when libs are located in an extension other than <i>lib64</i> or <i>lib</i></li>
     <li><b>INCDIR</b> (optional) -- use when the headers are located in an extension other than <i>include</i></li>
    </ul>
    The first argument still must be the name of the package.
  </li>
  <li>The packaging was enhanced to add the libicui18n, libicudata and libicuuc system libraries used by Qt to the lib directory. This is done automaticallly if the libraries can be found in the <i>lib64</i> directory. The packaging logic was also enhanced to add the libstdc++ libraries to the lib directory of a distribution. The libstdc++ library depends on VISIT_CXX_LIBRARY being defined. This would typically be added to the config site file and would be set if using a non-standard compiler on a system. Both of these enhancements only apply to Linux systems.</li>
  <li>The version of Mili was upgraded to 22.1.</li>
</ul>

<p>Click the following link to view the release notes for the previous version
of VisIt: <a href=relnotes3.2.2.html>3.2.2</a>.</p>
</body>
</html>
